const It=Symbol("Comlink.proxy"),r_=Symbol("Comlink.endpoint"),a_=Symbol("Comlink.releaseProxy"),st=Symbol("Comlink.finalizer"),Ve=Symbol("Comlink.thrown"),Dt=r=>typeof r=="object"&&r!==null||typeof r=="function",i_={canHandle:r=>Dt(r)&&r[It],serialize(r){const{port1:e,port2:n}=new MessageChannel;return ot(r,e),[n,[n]]},deserialize(r){return r.start(),d_(r)}},o_={canHandle:r=>Dt(r)&&Ve in r,serialize({value:r}){let e;return r instanceof Error?e={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:e={isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},Ot=new Map([["proxy",i_],["throw",o_]]);function p_(r,e){for(const n of r)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function ot(r,e=globalThis,n=["*"]){e.addEventListener("message",function t(a){if(!a||!a.data)return;if(!p_(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:p,type:w,path:h}=Object.assign({path:[]},a.data),g=(a.data.argumentList||[]).map(he);let c;try{const A=h.slice(0,-1).reduce((R,_e)=>R[_e],r),S=h.reduce((R,_e)=>R[_e],r);switch(w){case"GET":c=S;break;case"SET":A[h.slice(-1)[0]]=he(a.data.value),c=!0;break;case"APPLY":c=S.apply(A,g);break;case"CONSTRUCT":{const R=new S(...g);c=h_(R)}break;case"ENDPOINT":{const{port1:R,port2:_e}=new MessageChannel;ot(r,_e),c=u_(R,[R])}break;case"RELEASE":c=void 0;break;default:return}}catch(A){c={value:A,[Ve]:0}}Promise.resolve(c).catch(A=>({value:A,[Ve]:0})).then(A=>{const[S,R]=Ye(A);e.postMessage(Object.assign(Object.assign({},S),{id:p}),R),w==="RELEASE"&&(e.removeEventListener("message",t),Lt(e),st in r&&typeof r[st]=="function"&&r[st]())}).catch(A=>{const[S,R]=Ye({value:new TypeError("Unserializable return value"),[Ve]:0});e.postMessage(Object.assign(Object.assign({},S),{id:p}),R)})}),e.start&&e.start()}function m_(r){return r.constructor.name==="MessagePort"}function Lt(r){m_(r)&&r.close()}function d_(r,e){const n=new Map;return r.addEventListener("message",function(a){const{data:p}=a;if(!p||!p.id)return;const w=n.get(p.id);if(w)try{w(p)}finally{n.delete(p.id)}}),it(r,n,[],e)}function Ue(r){if(r)throw new Error("Proxy has been released and is not useable")}function Nt(r){return Pe(r,new Map,{type:"RELEASE"}).then(()=>{Lt(r)})}const We=new WeakMap,Je="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const e=(We.get(r)||0)-1;We.set(r,e),e===0&&Nt(r)});function l_(r,e){const n=(We.get(e)||0)+1;We.set(e,n),Je&&Je.register(r,e,r)}function f_(r){Je&&Je.unregister(r)}function it(r,e,n=[],t=function(){}){let a=!1;const p=new Proxy(t,{get(w,h){if(Ue(a),h===a_)return()=>{f_(p),Nt(r),e.clear(),a=!0};if(h==="then"){if(n.length===0)return{then:()=>p};const g=Pe(r,e,{type:"GET",path:n.map(c=>c.toString())}).then(he);return g.then.bind(g)}return it(r,e,[...n,h])},set(w,h,g){Ue(a);const[c,A]=Ye(g);return Pe(r,e,{type:"SET",path:[...n,h].map(S=>S.toString()),value:c},A).then(he)},apply(w,h,g){Ue(a);const c=n[n.length-1];if(c===r_)return Pe(r,e,{type:"ENDPOINT"}).then(he);if(c==="bind")return it(r,e,n.slice(0,-1));const[A,S]=Ft(g);return Pe(r,e,{type:"APPLY",path:n.map(R=>R.toString()),argumentList:A},S).then(he)},construct(w,h){Ue(a);const[g,c]=Ft(h);return Pe(r,e,{type:"CONSTRUCT",path:n.map(A=>A.toString()),argumentList:g},c).then(he)}});return l_(p,r),p}function w_(r){return Array.prototype.concat.apply([],r)}function Ft(r){const e=r.map(Ye);return[e.map(n=>n[0]),w_(e.map(n=>n[1]))]}const Ct=new WeakMap;function u_(r,e){return Ct.set(r,e),r}function h_(r){return Object.assign(r,{[It]:!0})}function Ye(r){for(const[e,n]of Ot)if(n.canHandle(r)){const[t,a]=n.serialize(r);return[{type:"HANDLER",name:e,value:t},a]}return[{type:"RAW",value:r},Ct.get(r)||[]]}function he(r){switch(r.type){case"HANDLER":return Ot.get(r.name).deserialize(r.value);case"RAW":return r.value}}function Pe(r,e,n,t){return new Promise(a=>{const p=c_();e.set(p,a),r.start&&r.start(),r.postMessage(Object.assign({id:p},n),t)})}function c_(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var g_=async function(r={}){var e,n,t=r,a=new Promise((i,o)=>{e=i,n=o}),p=typeof window=="object",w=typeof WorkerGlobalScope<"u",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(h){const{createRequire:i}=await import("./__vite-browser-external-9wXp6ZBx.js");var g=i(import.meta.url)}var c,A,S="./this.program",R=(i,o)=>{throw o},_e=import.meta.url,be="";if(h){var Me=g("fs"),Ut=g("path");_e.startsWith("file:")&&(be=Ut.dirname(g("url").fileURLToPath(_e))+"/"),A=i=>(i=je(i)?new URL(i):i,Me.readFileSync(i)),c=async(i,o=!0)=>(i=je(i)?new URL(i):i,Me.readFileSync(i,o?void 0:"utf8")),process.argv.length>1&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),R=(i,o)=>{throw process.exitCode=i,o}}else if(p||w){try{be=new URL(".",_e).href}catch{}w&&(A=i=>{var o=new XMLHttpRequest;return o.open("GET",i,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),c=async i=>{if(je(i))return new Promise((d,l)=>{var f=new XMLHttpRequest;f.open("GET",i,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?d(f.response):l(f.status)},f.onerror=l,f.send(null)});var o=await fetch(i,{credentials:"same-origin"});if(o.ok)return o.arrayBuffer();throw new Error(o.status+" : "+o.url)}}var Se,He,fe,B,ie,Ze,dt,lt=console.log.bind(console),ye=console.error.bind(console),et=!1,ft=!1,je=i=>i.startsWith("file://");function wt(){var i=He.buffer;t.HEAPU8=fe=new Uint8Array(i),t.HEAP32=B=new Int32Array(i),t.HEAPU32=ie=new Uint32Array(i),t.HEAPF32=new Float32Array(i),dt=new Float64Array(i),Ze=new BigInt64Array(i),new BigUint64Array(i)}var tt,we=0,Ie=null;function Gt(){return t.locateFile?(i="mupdf-wasm.wasm",t.locateFile?t.locateFile(i,be):be+i):new URL("/easci-read/assets/mupdf-wasm-DGGPXobK.wasm",import.meta.url).href;var i}async function $t(i){if(!Se)try{var o=await c(i);return new Uint8Array(o)}catch{}return(function(d){if(d==tt&&Se)return new Uint8Array(Se);if(A)return A(d);throw"both async and sync fetching of the wasm failed"})(i)}async function zt(i,o){try{var d=await $t(i);return await WebAssembly.instantiate(d,o)}catch(l){ye(`failed to asynchronously prepare wasm: ${l}`),(function(f){t.onAbort?.(f),ye(f="Aborted("+f+")"),et=!0,f+=". Build with -sASSERTIONS for more info.",ft&&n_();var u=new WebAssembly.RuntimeError(f);throw n(u),u})(l)}}class Vt{name="ExitStatus";constructor(o){this.message=`Program terminated with exit(${o})`,this.status=o}}var ut=i=>{for(;i.length>0;)i.shift()(t)},ht=[],Wt=i=>ht.push(i),ct=[],Jt=i=>ct.push(i),gt=!0,bt=new TextDecoder,yt=(i,o)=>{if(!i)return"";for(var d=i+o,l=i;!(l>=d)&&fe[l];)++l;return bt.decode(fe.subarray(i,l))},Yt=i=>i<-9007199254740992||i>9007199254740992?NaN:Number(i),Ee=(i,o,d)=>((l,f,u,y)=>{if(!(y>0))return 0;for(var P=u,Y=u+y-1,xe=0;xe<l.length;++xe){var C=l.charCodeAt(xe);if(C>=55296&&C<=57343&&(C=65536+((1023&C)<<10)|1023&l.charCodeAt(++xe)),C<=127){if(u>=Y)break;f[u++]=C}else if(C<=2047){if(u+1>=Y)break;f[u++]=192|C>>6,f[u++]=128|63&C}else if(C<=65535){if(u+2>=Y)break;f[u++]=224|C>>12,f[u++]=128|C>>6&63,f[u++]=128|63&C}else{if(u+3>=Y)break;f[u++]=240|C>>18,f[u++]=128|C>>12&63,f[u++]=128|C>>6&63,f[u++]=128|63&C}}return f[u]=0,u-P})(i,fe,o,d),Et=()=>Date.now(),_t=[],xt=(i,o,d)=>{var l=((f,u)=>{var y;for(_t.length=0;y=fe[f++];){var P=y!=105;u+=(P&=y!=112)&&u%8?4:0,_t.push(y==112?ie[u>>2]:y==106?Ze[u>>3]:y==105?B[u>>2]:dt[u>>3]),u+=P?8:4}return _t})(o,d);return t_[i](...l)},Kt=(i,o)=>Math.ceil(i/o)*o,Xt=i=>{var o=(i-He.buffer.byteLength+65535)/65536|0;try{return He.grow(o),wt(),1}catch{}},nt={},De=()=>{if(!De.strings){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"};for(var o in nt)nt[o]===void 0?delete i[o]:i[o]=nt[o];var d=[];for(var o in i)d.push(`${o}=${i[o]}`);De.strings=d}return De.strings},Tt=i=>{for(var o=0,d=0;d<i.length;++d){var l=i.charCodeAt(d);l<=127?o++:l<=2047?o+=2:l>=55296&&l<=57343?(o+=4,++d):o+=3}return o},qt=i=>{gt||(t.onExit?.(i),et=!0),R(i,new Vt(i))},Qt=(i,o)=>{qt(i)},Zt=[null,[],[]],e_=(i,o)=>{var d=Zt[i];o===0||o===10?((i===1?lt:ye)(((l,f=0,u=NaN)=>{for(var y=f+u,P=f;l[P]&&!(P>=y);)++P;return bt.decode(l.buffer?l.subarray(f,P):new Uint8Array(l.slice(f,P)))})(d)),d.length=0):d.push(o)};t.noExitRuntime&&(gt=t.noExitRuntime),t.print&&(lt=t.print),t.printErr&&(ye=t.printErr),t.wasmBinary&&(Se=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&(S=t.thisProgram),t.UTF8ToString=yt,t.stringToUTF8=Ee,t.lengthBytesUTF8=Tt;var t_={6016e3:()=>{throw"TRYLATER"},6016022:()=>{throw"ABORT"},6016041:i=>{throw new Error(yt(i))},6016080:()=>{throw new Error("Cannot create MuPDF context!")},6016133:(i,o,d,l,f,u,y)=>{globalThis.$libmupdf_text_walk.begin_span(i,o,d,l,f,u,y)},6016207:(i,o,d,l,f,u,y,P)=>{globalThis.$libmupdf_text_walk.show_glyph(i,o,d,l,f,u,y,P)},6016285:i=>{globalThis.$libmupdf_text_walk.end_span(i)},6016333:(i,o,d,l)=>globalThis.$libmupdf_load_font_file(i,o,d,l),6016396:(i,o,d,l)=>globalThis.$libmupdf_stm_read(i,o,d,l),6016454:i=>{globalThis.$libmupdf_stm_close(i)},6016494:(i,o,d,l)=>globalThis.$libmupdf_stm_seek(i,o,d,l),6016552:(i,o,d)=>{globalThis.$libmupdf_path_walk.moveto(i,o,d)},6016606:(i,o,d)=>{globalThis.$libmupdf_path_walk.lineto(i,o,d)},6016660:(i,o,d,l,f,u,y)=>{globalThis.$libmupdf_path_walk.curveto(i,o,d,l,f,u,y)},6016731:i=>{globalThis.$libmupdf_path_walk.closepath(i)},6016780:i=>{globalThis.$libmupdf_device.close_device(i)},6016829:i=>{globalThis.$libmupdf_device.drop_device(i)},6016877:(i,o,d,l,f,u,y,P)=>{globalThis.$libmupdf_device.fill_path(i,o,d,l,f,u,y,P)},6016951:(i,o,d,l,f,u,y,P)=>{globalThis.$libmupdf_device.stroke_path(i,o,d,l,f,u,y,P)},6017027:(i,o,d,l)=>{globalThis.$libmupdf_device.clip_path(i,o,d,l)},6017085:(i,o,d,l)=>{globalThis.$libmupdf_device.clip_stroke_path(i,o,d,l)},6017150:(i,o,d,l,f,u,y)=>{globalThis.$libmupdf_device.fill_text(i,o,d,l,f,u,y)},6017220:(i,o,d,l,f,u,y,P)=>{globalThis.$libmupdf_device.stroke_text(i,o,d,l,f,u,y,P)},6017296:(i,o,d)=>{globalThis.$libmupdf_device.clip_text(i,o,d)},6017350:(i,o,d,l)=>{globalThis.$libmupdf_device.clip_stroke_text(i,o,d,l)},6017415:(i,o,d)=>{globalThis.$libmupdf_device.ignore_text(i,o,d)},6017471:(i,o,d,l)=>{globalThis.$libmupdf_device.fill_shade(i,o,d,l)},6017530:(i,o,d,l)=>{globalThis.$libmupdf_device.fill_image(i,o,d,l)},6017589:(i,o,d,l,f,u,y)=>{globalThis.$libmupdf_device.fill_image_mask(i,o,d,l,f,u,y)},6017665:(i,o,d)=>{globalThis.$libmupdf_device.clip_image_mask(i,o,d)},6017725:i=>{globalThis.$libmupdf_device.pop_clip(i)},6017770:(i,o,d,l,f,u)=>{globalThis.$libmupdf_device.begin_mask(i,o,d,l,f,u)},6017837:(i,o)=>{globalThis.$libmupdf_device.end_mask(i,o)},6017886:(i,o,d,l,f,u,y)=>{globalThis.$libmupdf_device.begin_group(i,o,d,l,f,u,y)},6017958:i=>{globalThis.$libmupdf_device.end_group(i)},6018004:(i,o,d,l,f,u,y)=>globalThis.$libmupdf_device.begin_tile(i,o,d,l,f,u,y),6018082:i=>{globalThis.$libmupdf_device.end_tile(i)},6018127:(i,o)=>{globalThis.$libmupdf_device.begin_layer(i,o)},6018179:i=>{globalThis.$libmupdf_device.end_layer(i)}},__={g:function(i,o,d){return 0},u:function(i,o){},t:function(i,o,d){return 0},f:function(i,o,d,l){},s:i=>{},e:(i,o,d)=>{},m:function(i,o){i=Yt(i);var d=new Date(1e3*i);B[o>>2]=d.getUTCSeconds(),B[o+4>>2]=d.getUTCMinutes(),B[o+8>>2]=d.getUTCHours(),B[o+12>>2]=d.getUTCDate(),B[o+16>>2]=d.getUTCMonth(),B[o+20>>2]=d.getUTCFullYear()-1900,B[o+24>>2]=d.getUTCDay();var l=Date.UTC(d.getUTCFullYear(),0,1,0,0,0,0),f=(d.getTime()-l)/864e5|0;B[o+28>>2]=f},l:function(i){var o=(()=>{var d=Date.UTC(B[i+20>>2]+1900,B[i+16>>2],B[i+12>>2],B[i+8>>2],B[i+4>>2],B[i>>2],0),l=new Date(d);B[i+24>>2]=l.getUTCDay();var f=Date.UTC(l.getUTCFullYear(),0,1,0,0,0,0),u=(l.getTime()-f)/864e5|0;return B[i+28>>2]=u,l.getTime()/1e3})();return BigInt(o)},k:(i,o,d,l)=>{var f=new Date().getFullYear(),u=new Date(f,0,1),y=new Date(f,6,1),P=u.getTimezoneOffset(),Y=y.getTimezoneOffset(),xe=Math.max(P,Y);ie[i>>2]=60*xe,B[o>>2]=+(P!=Y);var C=Pt=>{var s_=Pt>=0?"-":"+",vt=Math.abs(Pt);return`UTC${s_}${String(Math.floor(vt/60)).padStart(2,"0")}${String(vt%60).padStart(2,"0")}`},kt=C(P),At=C(Y);Y<P?(Ee(kt,d,17),Ee(At,l,17)):(Ee(kt,l,17),Ee(At,d,17))},r:function(i,o,d){if(!((l=i)>=0&&l<=3))return 28;var l,f;f=i===0?Et():performance.now();var u=Math.round(1e3*f*1e3);return Ze[d>>3]=BigInt(u),0},a:(i,o,d)=>xt(i,o,d),j:(i,o,d)=>xt(i,o,d),i:Et,h:i=>{var o=fe.length,d=2147483648;if((i>>>=0)>d)return!1;for(var l=1;l<=4;l*=2){var f=o*(1+.2/l);f=Math.min(f,i+100663296);var u=Math.min(d,Kt(Math.max(i,f),65536));if(Xt(u))return!0}return!1},q:(i,o)=>{var d=0,l=0;for(var f of De()){var u=o+d;ie[i+l>>2]=u,d+=Ee(f,u,1/0)+1,l+=4}return 0},p:(i,o)=>{var d=De();ie[i>>2]=d.length;var l=0;for(var f of d)l+=Tt(f)+1;return ie[o>>2]=l,0},b:Qt,d:i=>52,o:(i,o,d,l)=>52,n:function(i,o,d,l){return 70},c:(i,o,d,l)=>{for(var f=0,u=0;u<d;u++){var y=ie[o>>2],P=ie[o+4>>2];o+=8;for(var Y=0;Y<P;Y++)e_(i,fe[y+Y]);f+=P}return ie[l>>2]=f,0}},s=await(async function(){function i(l,f){return s=l.exports,He=s.v,wt(),(function(){if(we--,t.monitorRunDependencies?.(we),we==0&&Ie){var u=Ie;Ie=null,u()}})(),s}we++,t.monitorRunDependencies?.(we);var o={a:__};if(t.instantiateWasm)return new Promise((l,f)=>{t.instantiateWasm(o,(u,y)=>{l(i(u))})});tt??=Gt();try{var d=(function(l){return i(l.instance)})(await(async function(l,f,u){if(!l&&typeof WebAssembly.instantiateStreaming=="function"&&!je(f)&&!h)try{var y=fetch(f,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(y,u)}catch(P){ye(`wasm streaming compile failed: ${P}`),ye("falling back to ArrayBuffer instantiation")}return zt(f,u)})(Se,tt,o));return d}catch(l){return n(l),Promise.reject(l)}})(),n_=(s.w,t._wasm_init_context=s.x,t._wasm_malloc=s.y,t._wasm_free=s.z,t._wasm_enable_icc=s.A,t._wasm_disable_icc=s.B,t._wasm_set_user_css=s.C,t._wasm_Memento_checkAllMemory=s.D,t._wasm_Memento_listBlocks=s.E,t._wasm_keep_buffer=s.F,t._wasm_drop_buffer=s.G,t._wasm_keep_stream=s.H,t._wasm_drop_stream=s.I,t._wasm_keep_colorspace=s.J,t._wasm_drop_colorspace=s.K,t._wasm_keep_pixmap=s.L,t._wasm_drop_pixmap=s.M,t._wasm_keep_font=s.N,t._wasm_drop_font=s.O,t._wasm_keep_stroke_state=s.P,t._wasm_drop_stroke_state=s.Q,t._wasm_keep_image=s.R,t._wasm_drop_image=s.S,t._wasm_keep_shade=s.T,t._wasm_drop_shade=s.U,t._wasm_keep_path=s.V,t._wasm_drop_path=s.W,t._wasm_keep_text=s.X,t._wasm_drop_text=s.Y,t._wasm_keep_device=s.Z,t._wasm_drop_device=s._,t._wasm_keep_display_list=s.$,t._wasm_drop_display_list=s.aa,t._wasm_drop_stext_page=s.ba,t._wasm_drop_document_writer=s.ca,t._wasm_drop_outline_iterator=s.da,t._wasm_keep_document=s.ea,t._wasm_drop_document=s.fa,t._wasm_keep_page=s.ga,t._wasm_drop_page=s.ha,t._wasm_keep_link=s.ia,t._wasm_drop_link=s.ja,t._wasm_keep_outline=s.ka,t._wasm_drop_outline=s.la,t._wasm_pdf_keep_annot=s.ma,t._wasm_pdf_drop_annot=s.na,t._wasm_pdf_keep_obj=s.oa,t._wasm_pdf_drop_obj=s.pa,t._wasm_pdf_keep_graft_map=s.qa,t._wasm_pdf_drop_graft_map=s.ra,t._wasm_buffer_get_data=s.sa,t._wasm_buffer_get_len=s.ta,t._wasm_colorspace_get_type=s.ua,t._wasm_colorspace_get_n=s.va,t._wasm_colorspace_get_name=s.wa,t._wasm_pixmap_get_w=s.xa,t._wasm_pixmap_get_h=s.ya,t._wasm_pixmap_get_x=s.za,t._wasm_pixmap_get_y=s.Aa,t._wasm_pixmap_get_n=s.Ba,t._wasm_pixmap_get_stride=s.Ca,t._wasm_pixmap_get_alpha=s.Da,t._wasm_pixmap_get_xres=s.Ea,t._wasm_pixmap_get_yres=s.Fa,t._wasm_pixmap_get_colorspace=s.Ga,t._wasm_pixmap_get_samples=s.Ha,t._wasm_pixmap_set_xres=s.Ia,t._wasm_pixmap_set_yres=s.Ja,t._wasm_font_get_name=s.Ka,t._wasm_stroke_state_get_start_cap=s.La,t._wasm_stroke_state_set_start_cap=s.Ma,t._wasm_stroke_state_get_dash_cap=s.Na,t._wasm_stroke_state_set_dash_cap=s.Oa,t._wasm_stroke_state_get_end_cap=s.Pa,t._wasm_stroke_state_set_end_cap=s.Qa,t._wasm_stroke_state_get_linejoin=s.Ra,t._wasm_stroke_state_set_linejoin=s.Sa,t._wasm_stroke_state_get_linewidth=s.Ta,t._wasm_stroke_state_set_linewidth=s.Ua,t._wasm_stroke_state_get_miterlimit=s.Va,t._wasm_stroke_state_set_miterlimit=s.Wa,t._wasm_stroke_state_get_dash_phase=s.Xa,t._wasm_stroke_state_set_dash_phase=s.Ya,t._wasm_stroke_state_get_dash_len=s.Za,t._wasm_image_get_w=s._a,t._wasm_image_get_h=s.$a,t._wasm_image_get_n=s.ab,t._wasm_image_get_bpc=s.bb,t._wasm_image_get_xres=s.cb,t._wasm_image_get_yres=s.db,t._wasm_image_get_imagemask=s.eb,t._wasm_image_get_colorspace=s.fb,t._wasm_image_get_mask=s.gb,t._wasm_outline_get_title=s.hb,t._wasm_outline_get_uri=s.ib,t._wasm_outline_get_next=s.jb,t._wasm_outline_get_down=s.kb,t._wasm_outline_get_is_open=s.lb,t._wasm_outline_item_get_title=s.mb,t._wasm_outline_item_get_uri=s.nb,t._wasm_outline_item_get_is_open=s.ob,t._wasm_link_get_rect=s.pb,t._wasm_link_get_uri=s.qb,t._wasm_link_get_next=s.rb,t._wasm_stext_page_get_mediabox=s.sb,t._wasm_stext_page_get_first_block=s.tb,t._wasm_stext_block_get_next=s.ub,t._wasm_stext_block_get_type=s.vb,t._wasm_stext_block_get_bbox=s.wb,t._wasm_stext_block_get_first_line=s.xb,t._wasm_stext_block_get_transform=s.yb,t._wasm_stext_block_get_image=s.zb,t._wasm_stext_line_get_next=s.Ab,t._wasm_stext_line_get_wmode=s.Bb,t._wasm_stext_line_get_dir=s.Cb,t._wasm_stext_line_get_bbox=s.Db,t._wasm_stext_line_get_first_char=s.Eb,t._wasm_stext_char_get_next=s.Fb,t._wasm_stext_char_get_c=s.Gb,t._wasm_stext_char_get_origin=s.Hb,t._wasm_stext_char_get_quad=s.Ib,t._wasm_stext_char_get_size=s.Jb,t._wasm_stext_char_get_font=s.Kb,t._wasm_stext_char_get_argb=s.Lb,t._wasm_link_dest_get_chapter=s.Mb,t._wasm_link_dest_get_page=s.Nb,t._wasm_link_dest_get_type=s.Ob,t._wasm_link_dest_get_x=s.Pb,t._wasm_link_dest_get_y=s.Qb,t._wasm_link_dest_get_w=s.Rb,t._wasm_link_dest_get_h=s.Sb,t._wasm_link_dest_get_zoom=s.Tb,t._wasm_pdf_filespec_params_get_filename=s.Ub,t._wasm_pdf_filespec_params_get_mimetype=s.Vb,t._wasm_pdf_filespec_params_get_size=s.Wb,t._wasm_pdf_filespec_params_get_created=s.Xb,t._wasm_pdf_filespec_params_get_modified=s.Yb,t._wasm_pdf_page_get_obj=s.Zb,t._wasm_new_buffer=s._b,t._wasm_new_buffer_from_data=s.$b,t._wasm_append_string=s.ac,t._wasm_append_byte=s.bc,t._wasm_append_buffer=s.cc,t._wasm_slice_buffer=s.dc,t._wasm_string_from_buffer=s.ec,t._wasm_device_gray=s.fc,t._wasm_device_rgb=s.gc,t._wasm_device_bgr=s.hc,t._wasm_device_cmyk=s.ic,t._wasm_device_lab=s.jc,t._wasm_new_icc_colorspace=s.kc,t._wasm_new_stroke_state=s.lc,t._wasm_stroke_state_get_dash_item=s.mc,t._wasm_stroke_state_set_dash_item=s.nc,t._wasm_new_base14_font=s.oc,t._wasm_new_cjk_font=s.pc,t._wasm_new_font_from_buffer=s.qc,t._wasm_encode_character=s.rc,t._wasm_advance_glyph=s.sc,t._wasm_font_is_monospaced=s.tc,t._wasm_font_is_serif=s.uc,t._wasm_font_is_bold=s.vc,t._wasm_font_is_italic=s.wc,t._wasm_new_image_from_pixmap=s.xc,t._wasm_new_image_from_buffer=s.yc,t._wasm_get_pixmap_from_image=s.zc,t._wasm_new_pixmap_from_page=s.Ac,t._wasm_new_pixmap_from_page_contents=s.Bc,t._wasm_pdf_new_pixmap_from_page_with_usage=s.Cc,t._wasm_pdf_new_pixmap_from_page_contents_with_usage=s.Dc,t._wasm_new_pixmap_with_bbox=s.Ec,t._wasm_clear_pixmap=s.Fc,t._wasm_clear_pixmap_with_value=s.Gc,t._wasm_invert_pixmap=s.Hc,t._wasm_invert_pixmap_luminance=s.Ic,t._wasm_gamma_pixmap=s.Jc,t._wasm_tint_pixmap=s.Kc,t._wasm_new_buffer_from_pixmap_as_png=s.Lc,t._wasm_new_buffer_from_pixmap_as_pam=s.Mc,t._wasm_new_buffer_from_pixmap_as_psd=s.Nc,t._wasm_new_buffer_from_pixmap_as_jpeg=s.Oc,t._wasm_convert_pixmap=s.Pc,t._wasm_warp_pixmap=s.Qc,t._wasm_bound_shade=s.Rc,t._wasm_new_display_list=s.Sc,t._wasm_bound_display_list=s.Tc,t._wasm_run_display_list=s.Uc,t._wasm_new_pixmap_from_display_list=s.Vc,t._wasm_new_stext_page_from_display_list=s.Wc,t._wasm_search_display_list=s.Xc,t._wasm_new_path=s.Yc,t._wasm_moveto=s.Zc,t._wasm_lineto=s._c,t._wasm_curveto=s.$c,t._wasm_curvetov=s.ad,t._wasm_curvetoy=s.bd,t._wasm_closepath=s.cd,t._wasm_rectto=s.dd,t._wasm_transform_path=s.ed,t._wasm_bound_path=s.fd,t._wasm_new_text=s.gd,t._wasm_bound_text=s.hd,t._wasm_show_glyph=s.id,t._wasm_show_string=s.jd,t._wasm_new_draw_device=s.kd,t._wasm_new_display_list_device=s.ld,t._wasm_close_device=s.md,t._wasm_fill_path=s.nd,t._wasm_stroke_path=s.od,t._wasm_clip_path=s.pd,t._wasm_clip_stroke_path=s.qd,t._wasm_fill_text=s.rd,t._wasm_stroke_text=s.sd,t._wasm_clip_text=s.td,t._wasm_clip_stroke_text=s.ud,t._wasm_ignore_text=s.vd,t._wasm_fill_shade=s.wd,t._wasm_fill_image=s.xd,t._wasm_fill_image_mask=s.yd,t._wasm_clip_image_mask=s.zd,t._wasm_pop_clip=s.Ad,t._wasm_begin_mask=s.Bd,t._wasm_end_mask=s.Cd,t._wasm_begin_group=s.Dd,t._wasm_end_group=s.Ed,t._wasm_begin_tile=s.Fd,t._wasm_end_tile=s.Gd,t._wasm_begin_layer=s.Hd,t._wasm_end_layer=s.Id,t._wasm_new_document_writer_with_buffer=s.Jd,t._wasm_begin_page=s.Kd,t._wasm_end_page=s.Ld,t._wasm_close_document_writer=s.Md,t._wasm_print_stext_page_as_json=s.Nd,t._wasm_search_stext_page=s.Od,t._wasm_snap_selection=s.Pd,t._wasm_copy_selection=s.Qd,t._wasm_highlight_selection=s.Rd,t._wasm_print_stext_page_as_html=s.Sd,t._wasm_print_stext_page_as_text=s.Td,t._wasm_open_document_with_buffer=s.Ud,t._wasm_open_document_with_stream=s.Vd,t._wasm_format_link_uri=s.Wd,t._wasm_needs_password=s.Xd,t._wasm_authenticate_password=s.Yd,t._wasm_has_permission=s.Zd,t._wasm_count_pages=s._d,t._wasm_load_page=s.$d,t._wasm_lookup_metadata=s.ae,t._wasm_set_metadata=s.be,t._wasm_resolve_link=s.ce,t._wasm_resolve_link_dest=s.de,t._wasm_load_outline=s.ee,t._wasm_outline_get_page=s.fe,t._wasm_layout_document=s.ge,t._wasm_is_document_reflowable=s.he,t._wasm_link_set_rect=s.ie,t._wasm_link_set_uri=s.je,t._wasm_bound_page=s.ke,t._wasm_load_links=s.le,t._wasm_create_link=s.me,t._wasm_delete_link=s.ne,t._wasm_run_page=s.oe,t._wasm_run_page_contents=s.pe,t._wasm_run_page_annots=s.qe,t._wasm_run_page_widgets=s.re,t._wasm_new_stext_page_from_page=s.se,t._wasm_new_display_list_from_page=s.te,t._wasm_new_display_list_from_page_contents=s.ue,t._wasm_page_label=s.ve,t._wasm_search_page=s.we,t._wasm_new_outline_iterator=s.xe,t._wasm_outline_iterator_next=s.ye,t._wasm_outline_iterator_prev=s.ze,t._wasm_outline_iterator_up=s.Ae,t._wasm_outline_iterator_down=s.Be,t._wasm_outline_iterator_delete=s.Ce,t._wasm_outline_iterator_item=s.De,t._wasm_outline_iterator_insert=s.Ee,t._wasm_outline_iterator_update=s.Fe,t._wasm_pdf_document_from_fz_document=s.Ge,t._wasm_pdf_page_from_fz_page=s.He,t._wasm_pdf_create_document=s.Ie,t._wasm_pdf_version=s.Je,t._wasm_pdf_was_repaired=s.Ke,t._wasm_pdf_has_unsaved_changes=s.Le,t._wasm_pdf_can_be_saved_incrementally=s.Me,t._wasm_pdf_count_versions=s.Ne,t._wasm_pdf_count_unsaved_versions=s.Oe,t._wasm_pdf_validate_change_history=s.Pe,t._wasm_pdf_enable_journal=s.Qe,t._wasm_pdf_undoredo_state_position=s.Re,t._wasm_pdf_undoredo_state_count=s.Se,t._wasm_pdf_undoredo_step=s.Te,t._wasm_pdf_begin_operation=s.Ue,t._wasm_pdf_begin_implicit_operation=s.Ve,t._wasm_pdf_end_operation=s.We,t._wasm_pdf_abandon_operation=s.Xe,t._wasm_pdf_undo=s.Ye,t._wasm_pdf_redo=s.Ze,t._wasm_pdf_can_undo=s._e,t._wasm_pdf_can_redo=s.$e,t._wasm_pdf_document_language=s.af,t._wasm_pdf_set_document_language=s.bf,t._wasm_pdf_trailer=s.cf,t._wasm_pdf_xref_len=s.df,t._wasm_pdf_lookup_page_obj=s.ef,t._wasm_pdf_add_object=s.ff,t._wasm_pdf_create_object=s.gf,t._wasm_pdf_delete_object=s.hf,t._wasm_pdf_add_stream=s.jf,t._wasm_pdf_add_simple_font=s.kf,t._wasm_pdf_add_cjk_font=s.lf,t._wasm_pdf_add_cid_font=s.mf,t._wasm_pdf_add_image=s.nf,t._wasm_pdf_load_image=s.of,t._wasm_pdf_add_page=s.pf,t._wasm_pdf_insert_page=s.qf,t._wasm_pdf_delete_page=s.rf,t._wasm_pdf_set_page_labels=s.sf,t._wasm_pdf_delete_page_labels=s.tf,t._wasm_pdf_is_embedded_file=s.uf,t._wasm_pdf_get_filespec_params=s.vf,t._wasm_pdf_add_embedded_file=s.wf,t._wasm_pdf_load_embedded_file_contents=s.xf,t._wasm_pdf_write_document_buffer=s.yf,t._wasm_pdf_js_supported=s.zf,t._wasm_pdf_enable_js=s.Af,t._wasm_pdf_disable_js=s.Bf,t._wasm_pdf_rearrange_pages=s.Cf,t._wasm_pdf_subset_fonts=s.Df,t._wasm_pdf_bake_document=s.Ef,t._wasm_pdf_count_layers=s.Ff,t._wasm_pdf_layer_name=s.Gf,t._wasm_pdf_layer_is_enabled=s.Hf,t._wasm_pdf_enable_layer=s.If,t._wasm_pdf_page_transform=s.Jf,t._wasm_pdf_set_page_box=s.Kf,t._wasm_pdf_first_annot=s.Lf,t._wasm_pdf_next_annot=s.Mf,t._wasm_pdf_first_widget=s.Nf,t._wasm_pdf_next_widget=s.Of,t._wasm_pdf_create_annot=s.Pf,t._wasm_pdf_delete_annot=s.Qf,t._wasm_pdf_update_page=s.Rf,t._wasm_pdf_redact_page=s.Sf,t._wasm_pdf_new_graft_map=s.Tf,t._wasm_pdf_graft_mapped_object=s.Uf,t._wasm_pdf_graft_object=s.Vf,t._wasm_pdf_graft_mapped_page=s.Wf,t._wasm_pdf_graft_page=s.Xf,t._wasm_pdf_bound_annot=s.Yf,t._wasm_pdf_run_annot=s.Zf,t._wasm_pdf_new_pixmap_from_annot=s._f,t._wasm_pdf_new_display_list_from_annot=s.$f,t._wasm_pdf_update_annot=s.ag,t._wasm_pdf_annot_obj=s.bg,t._wasm_pdf_annot_type=s.cg,t._wasm_pdf_annot_flags=s.dg,t._wasm_pdf_set_annot_flags=s.eg,t._wasm_pdf_annot_contents=s.fg,t._wasm_pdf_set_annot_contents=s.gg,t._wasm_pdf_annot_author=s.hg,t._wasm_pdf_set_annot_author=s.ig,t._wasm_pdf_annot_creation_date=s.jg,t._wasm_pdf_set_annot_creation_date=s.kg,t._wasm_pdf_annot_modification_date=s.lg,t._wasm_pdf_set_annot_modification_date=s.mg,t._wasm_pdf_annot_border_width=s.ng,t._wasm_pdf_set_annot_border_width=s.og,t._wasm_pdf_annot_border_style=s.pg,t._wasm_pdf_set_annot_border_style=s.qg,t._wasm_pdf_annot_border_effect=s.rg,t._wasm_pdf_set_annot_border_effect=s.sg,t._wasm_pdf_annot_border_effect_intensity=s.tg,t._wasm_pdf_set_annot_border_effect_intensity=s.ug,t._wasm_pdf_annot_opacity=s.vg,t._wasm_pdf_set_annot_opacity=s.wg,t._wasm_pdf_annot_filespec=s.xg,t._wasm_pdf_set_annot_filespec=s.yg,t._wasm_pdf_annot_quadding=s.zg,t._wasm_pdf_set_annot_quadding=s.Ag,t._wasm_pdf_annot_is_open=s.Bg,t._wasm_pdf_set_annot_is_open=s.Cg,t._wasm_pdf_annot_hidden_for_editing=s.Dg,t._wasm_pdf_set_annot_hidden_for_editing=s.Eg,t._wasm_pdf_annot_icon_name=s.Fg,t._wasm_pdf_set_annot_icon_name=s.Gg,t._wasm_pdf_annot_intent=s.Hg,t._wasm_pdf_set_annot_intent=s.Ig,t._wasm_pdf_annot_callout_style=s.Jg,t._wasm_pdf_set_annot_callout_style=s.Kg,t._wasm_pdf_annot_line_leader=s.Lg,t._wasm_pdf_set_annot_line_leader=s.Mg,t._wasm_pdf_annot_line_leader_extension=s.Ng,t._wasm_pdf_set_annot_line_leader_extension=s.Og,t._wasm_pdf_annot_line_leader_offset=s.Pg,t._wasm_pdf_set_annot_line_leader_offset=s.Qg,t._wasm_pdf_annot_line_caption=s.Rg,t._wasm_pdf_set_annot_line_caption=s.Sg,t._wasm_pdf_annot_rich_defaults=s.Tg,t._wasm_pdf_set_annot_rich_defaults=s.Ug,t._wasm_pdf_annot_callout_point=s.Vg,t._wasm_pdf_annot_line_caption_offset=s.Wg,t._wasm_pdf_annot_rect=s.Xg,t._wasm_pdf_annot_popup=s.Yg,t._wasm_pdf_annot_quad_point_count=s.Zg,t._wasm_pdf_annot_quad_point=s._g,t._wasm_pdf_annot_vertex_count=s.$g,t._wasm_pdf_annot_vertex=s.ah,t._wasm_pdf_annot_ink_list_count=s.bh,t._wasm_pdf_annot_ink_list_stroke_count=s.ch,t._wasm_pdf_annot_ink_list_stroke_vertex=s.dh,t._wasm_pdf_annot_rich_contents=s.eh,t._wasm_pdf_annot_border_dash_count=s.fh,t._wasm_pdf_annot_border_dash_item=s.gh,t._wasm_pdf_annot_has_rect=s.hh,t._wasm_pdf_annot_has_ink_list=s.ih,t._wasm_pdf_annot_has_quad_points=s.jh,t._wasm_pdf_annot_has_vertices=s.kh,t._wasm_pdf_annot_has_line=s.lh,t._wasm_pdf_annot_has_interior_color=s.mh,t._wasm_pdf_annot_has_line_ending_styles=s.nh,t._wasm_pdf_annot_has_border=s.oh,t._wasm_pdf_annot_has_border_effect=s.ph,t._wasm_pdf_annot_has_icon_name=s.qh,t._wasm_pdf_annot_has_open=s.rh,t._wasm_pdf_annot_has_author=s.sh,t._wasm_pdf_annot_has_filespec=s.th,t._wasm_pdf_annot_has_callout=s.uh,t._wasm_pdf_annot_has_rich_contents=s.vh,t._wasm_pdf_annot_language=s.wh,t._wasm_pdf_set_annot_language=s.xh,t._wasm_pdf_set_annot_popup=s.yh,t._wasm_pdf_set_annot_rect=s.zh,t._wasm_pdf_clear_annot_quad_points=s.Ah,t._wasm_pdf_clear_annot_vertices=s.Bh,t._wasm_pdf_clear_annot_ink_list=s.Ch,t._wasm_pdf_clear_annot_border_dash=s.Dh,t._wasm_pdf_add_annot_quad_point=s.Eh,t._wasm_pdf_add_annot_vertex=s.Fh,t._wasm_pdf_add_annot_ink_list_stroke=s.Gh,t._wasm_pdf_add_annot_ink_list_stroke_vertex=s.Hh,t._wasm_pdf_add_annot_border_dash_item=s.Ih,t._wasm_pdf_annot_line_ending_styles_start=s.Jh,t._wasm_pdf_annot_line_1=s.Kh,t._wasm_pdf_annot_line_2=s.Lh,t._wasm_pdf_set_annot_line=s.Mh,t._wasm_pdf_set_annot_callout_point=s.Nh,t._wasm_pdf_annot_callout_line=s.Oh,t._wasm_pdf_set_annot_callout_line=s.Ph,t._wasm_pdf_set_annot_line_caption_offset=s.Qh,t._wasm_pdf_annot_line_ending_styles_end=s.Rh,t._wasm_pdf_set_annot_line_ending_styles=s.Sh,t._wasm_pdf_annot_color=s.Th,t._wasm_pdf_annot_interior_color=s.Uh,t._wasm_pdf_set_annot_color=s.Vh,t._wasm_pdf_set_annot_interior_color=s.Wh,t._wasm_pdf_set_annot_default_appearance=s.Xh,t._wasm_pdf_annot_default_appearance_font=s.Yh,t._wasm_pdf_annot_default_appearance_size=s.Zh,t._wasm_pdf_annot_default_appearance_color=s._h,t._wasm_pdf_set_annot_rich_contents=s.$h,t._wasm_pdf_set_annot_stamp_image=s.ai,t._wasm_pdf_set_annot_appearance_from_display_list=s.bi,t._wasm_pdf_set_annot_appearance=s.ci,t._wasm_pdf_apply_redaction=s.di,t._wasm_pdf_reset_form=s.ei,t._wasm_pdf_annot_field_type=s.fi,t._wasm_pdf_annot_field_flags=s.gi,t._wasm_pdf_annot_field_label=s.hi,t._wasm_pdf_annot_field_value=s.ii,t._wasm_pdf_load_field_name=s.ji,t._wasm_pdf_annot_text_widget_max_len=s.ki,t._wasm_pdf_set_annot_text_field_value=s.li,t._wasm_pdf_set_annot_choice_field_value=s.mi,t._wasm_pdf_annot_choice_field_option_count=s.ni,t._wasm_pdf_annot_choice_field_option=s.oi,t._wasm_pdf_toggle_widget=s.pi,t._wasm_pdf_is_indirect=s.qi,t._wasm_pdf_is_bool=s.ri,t._wasm_pdf_is_int=s.si,t._wasm_pdf_is_real=s.ti,t._wasm_pdf_is_number=s.ui,t._wasm_pdf_is_name=s.vi,t._wasm_pdf_is_string=s.wi,t._wasm_pdf_is_array=s.xi,t._wasm_pdf_is_dict=s.yi,t._wasm_pdf_is_stream=s.zi,t._wasm_pdf_to_num=s.Ai,t._wasm_pdf_to_bool=s.Bi,t._wasm_pdf_to_real=s.Ci,t._wasm_pdf_to_name=s.Di,t._wasm_pdf_to_text_string=s.Ei,t._wasm_pdf_new_indirect=s.Fi,t._wasm_pdf_new_array=s.Gi,t._wasm_pdf_new_dict=s.Hi,t._wasm_pdf_new_bool=s.Ii,t._wasm_pdf_new_int=s.Ji,t._wasm_pdf_new_real=s.Ki,t._wasm_pdf_new_name=s.Li,t._wasm_pdf_new_text_string=s.Mi,t._wasm_pdf_new_string=s.Ni,t._wasm_pdf_resolve_indirect=s.Oi,t._wasm_pdf_array_len=s.Pi,t._wasm_pdf_array_get=s.Qi,t._wasm_pdf_dict_get=s.Ri,t._wasm_pdf_dict_len=s.Si,t._wasm_pdf_dict_get_key=s.Ti,t._wasm_pdf_dict_get_val=s.Ui,t._wasm_pdf_dict_get_inheritable=s.Vi,t._wasm_pdf_dict_gets=s.Wi,t._wasm_pdf_dict_gets_inheritable=s.Xi,t._wasm_pdf_dict_put=s.Yi,t._wasm_pdf_dict_puts=s.Zi,t._wasm_pdf_dict_del=s._i,t._wasm_pdf_dict_dels=s.$i,t._wasm_pdf_array_put=s.aj,t._wasm_pdf_array_push=s.bj,t._wasm_pdf_array_delete=s.cj,t._wasm_pdf_sprint_obj=s.dj,t._wasm_pdf_load_stream=s.ej,t._wasm_pdf_load_raw_stream=s.fj,t._wasm_pdf_update_object=s.gj,t._wasm_pdf_update_stream=s.hj,t._wasm_pdf_to_string=s.ij,t._wasm_new_stream=s.jj,t._wasm_walk_path=s.kj,t._wasm_walk_text=s.lj,t._wasm_new_js_device=s.mj,s.nj);return(function(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()})(),(function i(){function o(){t.calledRun=!0,et||(ft=!0,s.w(),e(t),t.onRuntimeInitialized?.(),(function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Wt(t.postRun.shift());ut(ht)})())}we>0?Ie=i:((function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Jt(t.preRun.shift());ut(ct)})(),we>0?Ie=i:t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),o()},1)):o())})(),a},K=null;typeof process<"u"&&process.versions&&process.versions.node&&(K=await import("./__vite-browser-external-9wXp6ZBx.js"));const _=await g_(globalThis.$libmupdf_wasm_Module);_._wasm_init_context();function J(r){return _._wasm_malloc(r)}function ge(r){_._wasm_free(r)}const St=J(4),G=J(24)>>2,re=J(32)>>2,ue=J(24)>>2,H=J(16)>>2,oe=J(32)>>2,Ge=[0,0];function m(r,e){if(typeof e=="string"&&typeof r!==e)throw new TypeError("expected "+e);if(typeof e=="function"&&!(r instanceof e))throw new TypeError("expected "+e.name)}function $e(r){if(!Array.isArray(r)||r.length!==2)throw new TypeError("expected point")}function $(r){if(!Array.isArray(r)||r.length!==4)throw new TypeError("expected rectangle")}function k(r){if(!Array.isArray(r)||r.length!==6)throw new TypeError("expected matrix")}function Rt(r){if(!Array.isArray(r)||r.length!==8)throw new TypeError("expected quad")}function Te(r){if(!Array.isArray(r)||r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function rt(r){if(!Array.isArray(r)||r.length!==0&&r.length!==1&&r.length!==3&&r.length!==4)throw new TypeError("expected color array")}function Q(r){if(r instanceof ee)return r.pointer;if(r instanceof ArrayBuffer||r instanceof Uint8Array)return new ee(r).pointer;if(typeof r=="string")return new ee(r).pointer;throw new TypeError("expected buffer")}function j(r,e){if(typeof r=="number"&&r>=0&&r<e.length)return r;if(typeof r=="string"){let n=e.indexOf(r);if(n>=0)return n}throw new TypeError(`invalid enum value ("${r}"; expected ${e.join(", ")})`)}function b_(r){var e=_.lengthBytesUTF8(r)+1,n=J(e);return _.stringToUTF8(r,n,e),n}function qe(r,e){return Ge[e]&&(ge(Ge[e]),Ge[e]=0),Ge[e]=b_(r)}function b(r){return qe(r,0)}function Qe(r){return qe(r,1)}function Ce(r){return typeof r=="string"?qe(r,0):0}function Ke(r){return typeof r=="string"?qe(r,1):0}function pe(r){return _.HEAPF32[G+0]=r[0],_.HEAPF32[G+1]=r[1],G<<2}function Oe(r){return _.HEAPF32[G+2]=r[0],_.HEAPF32[G+3]=r[1],G+2<<2}function y_(r){return _.HEAPF32[G+4]=r[0],_.HEAPF32[G+5]=r[1],G+4<<2}function W(r){return _.HEAPF32[re+0]=r[0],_.HEAPF32[re+1]=r[1],_.HEAPF32[re+2]=r[2],_.HEAPF32[re+3]=r[3],re<<2}function E_(r){return _.HEAPF32[re+4]=r[0],_.HEAPF32[re+5]=r[1],_.HEAPF32[re+6]=r[2],_.HEAPF32[re+7]=r[3],re+4<<2}function T(r){return _.HEAPF32[ue+0]=r[0],_.HEAPF32[ue+1]=r[1],_.HEAPF32[ue+2]=r[2],_.HEAPF32[ue+3]=r[3],_.HEAPF32[ue+4]=r[4],_.HEAPF32[ue+5]=r[5],ue<<2}function Bt(r){return _.HEAPF32[oe+0]=r[0],_.HEAPF32[oe+1]=r[1],_.HEAPF32[oe+2]=r[2],_.HEAPF32[oe+3]=r[3],_.HEAPF32[oe+4]=r[4],_.HEAPF32[oe+5]=r[5],_.HEAPF32[oe+6]=r[6],_.HEAPF32[oe+7]=r[7],oe<<2}function q(r){if(typeof r<"u")switch(r.length){case 0:break;case 1:_.HEAPF32[H+0]=r[0];break;case 3:_.HEAPF32[H+0]=r[0],_.HEAPF32[H+1]=r[1],_.HEAPF32[H+2]=r[2];break;case 4:_.HEAPF32[H+0]=r[0],_.HEAPF32[H+1]=r[1],_.HEAPF32[H+2]=r[2],_.HEAPF32[H+3]=r[3];break}return H<<2}function x_(r){if(r===1)return[_.HEAPF32[H]];if(r===3)return[_.HEAPF32[H+0],_.HEAPF32[H+1],_.HEAPF32[H+2]];if(r===4)return[_.HEAPF32[H+0],_.HEAPF32[H+1],_.HEAPF32[H+2],_.HEAPF32[H+3]];throw new TypeError("invalid number of components for Color: "+r)}function at(r){return r===0?[]:x_(r)}function ke(r,e){let n=e>>2,t=[];for(let a=0;a<r;++a)t.push(_.HEAPF32[n+a]);return t}function Mt(r){return r===0?null:_.UTF8ToString(r)}function v(r){return _.UTF8ToString(r)}function ce(r){let e=_.UTF8ToString(r);return ge(r),e}function X(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1]]}function z(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3]]}function M(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3],_.HEAPF32[e+4],_.HEAPF32[e+5]]}function Le(r){let e=r>>2;return[_.HEAPF32[e+0],_.HEAPF32[e+1],_.HEAPF32[e+2],_.HEAPF32[e+3],_.HEAPF32[e+4],_.HEAPF32[e+5],_.HEAPF32[e+6],_.HEAPF32[e+7]]}function ze(r){let e=_._wasm_buffer_get_data(r),n=_._wasm_buffer_get_len(r);return _.HEAPU8.slice(e,e+n)}function T_(r){var e=r>>16&255,n=r>>8&255,t=r&255;return[e/255,n/255,t/255]}function pt(r,e,n,t=500){m(n,"string");let a=0,p=0;try{a=J(32*t),p=J(4*t);let w=r(e,b(n),p,a,t),h=[];if(w>0){let g=[];for(let c=0;c<w;++c){let A=_.HEAP32[(p>>2)+c],S=Le(a+c*32);c>0&&A&&(h.push(g),g=[]),g.push(S)}h.push(g)}return h}finally{ge(p),ge(a)}}class N{constructor(e){if(typeof e!="number")throw new Error("invalid pointer: "+typeof e);if(e!==0){let n=this.constructor;n._finalizer||(n._finalizer=new FinalizationRegistry(n._drop)),n._finalizer.register(this,e,this)}this.pointer=e}destroy(){if(this.pointer!==0){let e=this.constructor;e._finalizer.unregister(this),e._drop(this.pointer)}this.pointer=0}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}toString(){return`[${this.constructor.name} ${this.pointer}]`}valueOf(){throw new Error("cannot convert Userdata to Javascript value")}}class ee extends N{constructor(e){if(typeof e>"u")super(_._wasm_new_buffer(1024));else if(typeof e=="number")super(e);else if(typeof e=="string"){let n=_.lengthBytesUTF8(e),t=J(n+1);_.stringToUTF8(e,t,n+1),super(_._wasm_new_buffer_from_data(t,n))}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){let n=e.byteLength,t=J(n);_.HEAPU8.set(new Uint8Array(e),t),super(_._wasm_new_buffer_from_data(t,n))}}get length(){return this.getLength()}set length(e){throw new TypeError("buffer length is read-only")}getLength(){return _._wasm_buffer_get_len(this.pointer)}readByte(e){let n=_._wasm_buffer_get_data(this.pointer);return _.HEAPU8[n+e]}write(e){_._wasm_append_string(this.pointer,b(e))}writeByte(e){_._wasm_append_byte(this.pointer,e)}writeLine(e){this.write(e),this.writeByte(10)}writeBuffer(e){_._wasm_append_buffer(this.pointer,Q(e))}asUint8Array(){let e=_._wasm_buffer_get_data(this.pointer),n=_._wasm_buffer_get_len(this.pointer);return _.HEAPU8.subarray(e,e+n)}slice(e,n){return typeof n>"u"&&(n=this.getLength()),new ee(_._wasm_slice_buffer(this.pointer,e,n))}asString(){return v(_._wasm_string_from_buffer(this.pointer))}save(e){if(K)K.writeFileSync(e,this.asUint8Array());else throw new Error("missing 'fs' module")}}ee._drop=_._wasm_drop_buffer;class E extends N{constructor(e,n){if(typeof e=="number")super(e);else{if(typeof e=="string")if(K)e=K.readFileSync(e);else throw new Error("missing 'fs' module");super(_._wasm_new_icc_colorspace(Ce(n),Q(e)))}}getName(){return v(_._wasm_colorspace_get_name(this.pointer))}getType(){return E.COLORSPACE_TYPES[_._wasm_colorspace_get_type(this.pointer)]||"None"}getNumberOfComponents(){return _._wasm_colorspace_get_n(this.pointer)}isGray(){return this.getType()==="Gray"}isRGB(){return this.getType()==="RGB"}isCMYK(){return this.getType()==="CMYK"}isIndexed(){return this.getType()==="Indexed"}isLab(){return this.getType()==="Lab"}isDeviceN(){return this.getType()==="Separation"}isSubtractive(){return this.getType()==="CMYK"||this.getType()==="Separation"}toString(){return"[ColorSpace "+this.getName()+"]"}}E._drop=_._wasm_drop_colorspace;E.COLORSPACE_TYPES=["None","Gray","RGB","BGR","CMYK","Lab","Indexed","Separation"];E.DeviceGray=new E(_._wasm_device_gray());E.DeviceRGB=new E(_._wasm_device_rgb());E.DeviceBGR=new E(_._wasm_device_bgr());E.DeviceCMYK=new E(_._wasm_device_cmyk());E.Lab=new E(_._wasm_device_lab());class D extends N{constructor(e,n,t=0){let a=0;if(typeof e=="number")a=_._wasm_keep_font(e);else{if(typeof n=="string")if(K)n=K.readFileSync(n);else throw new Error("missing 'fs' module");n?a=_._wasm_new_font_from_buffer(b(e),Q(n),t):e==="zh-Hant"?a=_._wasm_new_cjk_font(D.ADOBE_CNS):e==="zh-Hans"?a=_._wasm_new_cjk_font(D.ADOBE_GB):e==="ja"?a=_._wasm_new_cjk_font(D.ADOBE_JAPAN):e==="ko"?a=_._wasm_new_cjk_font(D.ADOBE_KOREA):a=_._wasm_new_base14_font(b(e))}super(a)}getName(){return v(_._wasm_font_get_name(this.pointer))}encodeCharacter(e){return typeof e=="string"&&(e=e.charCodeAt(0)),_._wasm_encode_character(this.pointer,e)}advanceGlyph(e,n=0){return _._wasm_advance_glyph(this.pointer,e,n)}isMono(){return!!_._wasm_font_is_monospaced(this.pointer)}isSerif(){return!!_._wasm_font_is_serif(this.pointer)}isBold(){return!!_._wasm_font_is_bold(this.pointer)}isItalic(){return!!_._wasm_font_is_italic(this.pointer)}}D._drop=_._wasm_drop_font;D.SIMPLE_ENCODING=["Latin","Greek","Cyrillic"];D.ADOBE_CNS=0;D.ADOBE_GB=1;D.ADOBE_JAPAN=2;D.ADOBE_KOREA=3;D.CJK_ORDERING_BY_LANG={"Adobe-CNS1":0,"Adobe-GB1":1,"Adobe-Japan1":2,"Adobe-Korea1":3,"zh-Hant":0,"zh-TW":0,"zh-HK":0,"zh-Hans":1,"zh-CN":1,ja:2,ko:3};class te extends N{constructor(e,n){let t=0;if(typeof e=="number")t=_._wasm_keep_image(e);else if(e instanceof ae)t=_._wasm_new_image_from_pixmap(e.pointer,n?n.pointer:0);else{if(typeof e=="string")if(K)e=K.readFileSync(e);else throw new Error("missing 'fs' module");t=_._wasm_new_image_from_buffer(Q(e))}super(t)}getWidth(){return _._wasm_image_get_w(this.pointer)}getHeight(){return _._wasm_image_get_h(this.pointer)}getNumberOfComponents(){return _._wasm_image_get_n(this.pointer)}getBitsPerComponent(){return _._wasm_image_get_bpc(this.pointer)}getXResolution(){return _._wasm_image_get_xres(this.pointer)}getYResolution(){return _._wasm_image_get_yres(this.pointer)}getImageMask(){return!!_._wasm_image_get_imagemask(this.pointer)}getColorSpace(){let e=_._wasm_image_get_colorspace(this.pointer);return e?new E(_._wasm_keep_colorspace(e)):null}getMask(){let e=_._wasm_image_get_mask(this.pointer);return e?new te(_._wasm_keep_image(e)):null}toPixmap(){return new ae(_._wasm_get_pixmap_from_image(this.pointer))}}te._drop=_._wasm_drop_image;class U extends N{constructor(e){if(typeof e=="number")return super(e),this;super(_._wasm_new_stroke_state(e?.dashes?.length??0));let n=j(e.lineCap,U.LINE_CAP),t=j(e.lineJoin,U.LINE_JOIN);if(_._wasm_stroke_state_set_start_cap(this.pointer,n),_._wasm_stroke_state_set_dash_cap(this.pointer,n),_._wasm_stroke_state_set_end_cap(this.pointer,n),_._wasm_stroke_state_set_linejoin(this.pointer,t),_._wasm_stroke_state_set_linewidth(this.pointer,e.lineWidth),_._wasm_stroke_state_set_miterlimit(this.pointer,e.miterLimit),_._wasm_stroke_state_set_dash_phase(this.pointer,e.dashPhase??0),e.dashes)for(let a=0;a<e.dashes.length;++a)_._wasm_stroke_state_set_dash_item(this.pointer,a,e.dashes[a]??0)}getLineCap(){return _._wasm_stroke_state_get_start_cap(this.pointer)}getLineJoin(){return _._wasm_stroke_state_get_linejoin(this.pointer)}getLineWidth(){return _._wasm_stroke_state_get_linewidth(this.pointer)}getMiterLimit(){return _._wasm_stroke_state_get_miterlimit(this.pointer)}getDashPhase(){return _._wasm_stroke_state_get_dash_phase(this.pointer)}getDashes(){var e=_._wasm_stroke_state_get_dash_len(this.pointer);if(e>0){var n=[];for(let t=0;t<e;++t)n[t]=_._wasm_stroke_state_get_dash_item(this.pointer,t);return n}return null}}U._drop=_._wasm_drop_stroke_state;U.LINE_CAP=["Butt","Round","Square","Triangle"];U.LINE_JOIN=["Miter","Round","Bevel","MiterXPS"];class me extends N{constructor(e){typeof e=="number"?super(e):super(_._wasm_new_path())}getBounds(e,n){return e!==null&&m(e,U),k(n),z(_._wasm_bound_path(this.pointer,e?.pointer,T(n)))}moveTo(e,n){m(e,"number"),m(n,"number"),_._wasm_moveto(this.pointer,e,n)}lineTo(e,n){m(e,"number"),m(n,"number"),_._wasm_lineto(this.pointer,e,n)}curveTo(e,n,t,a,p,w){m(e,"number"),m(n,"number"),m(t,"number"),m(a,"number"),m(p,"number"),m(w,"number"),_._wasm_curveto(this.pointer,e,n,t,a,p,w)}curveToV(e,n,t,a){m(e,"number"),m(n,"number"),m(t,"number"),m(a,"number"),_._wasm_curvetov(this.pointer,e,n,t,a)}curveToY(e,n,t,a){m(e,"number"),m(n,"number"),m(t,"number"),m(a,"number"),_._wasm_curvetoy(this.pointer,e,n,t,a)}closePath(){_._wasm_closepath(this.pointer)}rect(e,n,t,a){m(e,"number"),m(n,"number"),m(t,"number"),m(a,"number"),_._wasm_rectto(this.pointer,e,n,t,a)}transform(e){k(e),_._wasm_transform_path(this.pointer,T(e))}walk(e){let n=v_++;ve.set(n,e),_._wasm_walk_path(this.pointer,n),ve.delete(n)}}me._drop=_._wasm_drop_path;class ne extends N{constructor(e){typeof e=="number"?super(e):super(_._wasm_new_text())}getBounds(e,n){return e!==null&&m(e,U),k(n),z(_._wasm_bound_text(this.pointer,e?.pointer,T(n)))}showGlyph(e,n,t,a,p=0){m(e,D),k(n),m(t,"number"),m(a,"number"),_._wasm_show_glyph(this.pointer,e.pointer,T(n),t,a,p)}showString(e,n,t,a=0){return m(e,D),k(n),m(t,"string"),M(_._wasm_show_string(this.pointer,e.pointer,T(n),b(t),a))}walk(e){let n=F_++;Ne.set(n,e),_._wasm_walk_text(this.pointer,n),Ne.delete(n)}}ne._drop=_._wasm_drop_text;class Xe extends N{constructor(e){let n=0;typeof e=="number"?n=e:($(e),n=_._wasm_new_display_list(W(e))),super(n)}getBounds(){return z(_._wasm_bound_display_list(this.pointer))}toPixmap(e,n,t=!1){return k(e),m(n,E),new ae(_._wasm_new_pixmap_from_display_list(this.pointer,T(e),n.pointer,t))}toStructuredText(e=""){return m(e,"string"),new de(_._wasm_new_stext_page_from_display_list(this.pointer,b(e)))}run(e,n){m(e,Z),k(n),_._wasm_run_display_list(this.pointer,e.pointer,T(n))}search(e,n=500){return pt(_._wasm_search_display_list,this.pointer,e,n)}}Xe._drop=_._wasm_drop_display_list;class ae extends N{constructor(e,n,t=!1){typeof e=="number"&&super(e),e instanceof E&&($(n),super(_._wasm_new_pixmap_with_bbox(e.pointer,W(n),t))),e===null&&($(n),super(_._wasm_new_pixmap_with_bbox(0,W(n),t)))}getBounds(){let e=_._wasm_pixmap_get_x(this.pointer),n=_._wasm_pixmap_get_y(this.pointer),t=_._wasm_pixmap_get_w(this.pointer),a=_._wasm_pixmap_get_h(this.pointer);return[e,n,e+t,n+a]}clear(e){typeof e>"u"?_._wasm_clear_pixmap(this.pointer):_._wasm_clear_pixmap_with_value(this.pointer,e)}getWidth(){return _._wasm_pixmap_get_w(this.pointer)}getHeight(){return _._wasm_pixmap_get_h(this.pointer)}getX(){return _._wasm_pixmap_get_x(this.pointer)}getY(){return _._wasm_pixmap_get_y(this.pointer)}getStride(){return _._wasm_pixmap_get_stride(this.pointer)}getNumberOfComponents(){return _._wasm_pixmap_get_n(this.pointer)}getAlpha(){return _._wasm_pixmap_get_alpha(this.pointer)}getXResolution(){return _._wasm_pixmap_get_xres(this.pointer)}getYResolution(){return _._wasm_pixmap_get_yres(this.pointer)}setResolution(e,n){_._wasm_pixmap_set_xres(this.pointer,e),_._wasm_pixmap_set_yres(this.pointer,n)}getColorSpace(){let e=_._wasm_pixmap_get_colorspace(this.pointer);return e?new E(_._wasm_keep_colorspace(e)):null}getPixels(){let e=_._wasm_pixmap_get_stride(this.pointer),n=_._wasm_pixmap_get_h(this.pointer),t=_._wasm_pixmap_get_samples(this.pointer);return new Uint8ClampedArray(_.HEAPU8.buffer,t,e*n)}asPNG(){let e=_._wasm_new_buffer_from_pixmap_as_png(this.pointer);try{return ze(e)}finally{_._wasm_drop_buffer(e)}}asPSD(){let e=_._wasm_new_buffer_from_pixmap_as_psd(this.pointer);try{return ze(e)}finally{_._wasm_drop_buffer(e)}}asPAM(){let e=_._wasm_new_buffer_from_pixmap_as_pam(this.pointer);try{return ze(e)}finally{_._wasm_drop_buffer(e)}}asJPEG(e,n=!1){let t=_._wasm_new_buffer_from_pixmap_as_jpeg(this.pointer,e,n);try{return ze(t)}finally{_._wasm_drop_buffer(t)}}invert(){_._wasm_invert_pixmap(this.pointer)}invertLuminance(){_._wasm_invert_pixmap_luminance(this.pointer)}gamma(e){_._wasm_gamma_pixmap(this.pointer,e)}tint(e,n){let t=0,a=16777215;typeof e=="number"?t=e:e instanceof Array&&e.length===3&&(t=e[0]*255<<16|e[1]*255<<8|e[2]*255),typeof n=="number"?a=n:n instanceof Array&&n.length===3&&(n=n[0]*255<<16|n[1]*255<<8|n[2]*255),_._wasm_tint_pixmap(this.pointer,t,a)}convertToColorSpace(e,n=!1){return m(e,E),m(n,"boolean"),new ae(_._wasm_convert_pixmap(this.pointer,e.pointer,n))}warp(e,n,t){let a=e.flat();return Rt(a),m(n,"number"),m(t,"number"),new ae(_._wasm_warp_pixmap(this.pointer,Bt(a),n,t))}}ae._drop=_._wasm_drop_pixmap;class mt extends N{getBounds(){return z(_._wasm_bound_shade(this.pointer))}}mt._drop=_._wasm_drop_shade;class de extends N{walk(e){let n=_._wasm_stext_page_get_first_block(this.pointer);for(;n;){let t=_._wasm_stext_block_get_type(n),a=z(_._wasm_stext_block_get_bbox(n));if(t===1){if(e.onImageBlock){let p=M(_._wasm_stext_block_get_transform(n)),w=new te(_._wasm_stext_block_get_image(n));e.onImageBlock(a,p,w)}}else{e.beginTextBlock&&e.beginTextBlock(a);let p=_._wasm_stext_block_get_first_line(n);for(;p;){let w=z(_._wasm_stext_line_get_bbox(p)),h=_._wasm_stext_line_get_wmode(p),g=X(_._wasm_stext_line_get_dir(p));if(e.beginLine&&e.beginLine(w,h,g),e.onChar){let c=_._wasm_stext_line_get_first_char(p);for(;c;){let A=String.fromCharCode(_._wasm_stext_char_get_c(c)),S=X(_._wasm_stext_char_get_origin(c)),R=new D(_._wasm_stext_char_get_font(c)),_e=_._wasm_stext_char_get_size(c),be=Le(_._wasm_stext_char_get_quad(c)),Me=T_(_._wasm_stext_char_get_argb(c));e.onChar(A,S,R,_e,be,Me),c=_._wasm_stext_char_get_next(c)}}e.endLine&&e.endLine(),p=_._wasm_stext_line_get_next(p)}e.endTextBlock&&e.endTextBlock()}n=_._wasm_stext_block_get_next(n)}}asJSON(e=1){return ce(_._wasm_print_stext_page_as_json(this.pointer,e))}asHTML(e){return ce(_._wasm_print_stext_page_as_html(this.pointer,e))}asText(){return ce(_._wasm_print_stext_page_as_text(this.pointer))}snap(e,n,t){let a=j(t,de.SELECT_MODE);return Le(_._wasm_snap_selection(this.pointer,pe(e),Oe(n),a))}copy(e,n){return ce(_._wasm_copy_selection(this.pointer,pe(e),Oe(n)))}highlight(e,n,t=100){let a=0,p=[];try{a=J(32*t);let w=_._wasm_highlight_selection(this.pointer,pe(e),Oe(n),a,t);for(let h=0;h<w;++h)p.push(Le(a+h*32))}finally{ge(a)}return p}search(e,n=500){return pt(_._wasm_search_stext_page,this.pointer,e,n)}}de._drop=_._wasm_drop_stext_page;de.SELECT_MODE=["chars","words","lines"];de.SELECT_CHARS="chars";de.SELECT_WORDS="words";de.SELECT_LINES="lines";class Z extends N{constructor(e){if(typeof e=="number")super(e);else{let n=P_++;F.set(n,e),super(_._wasm_new_js_device(n))}}fillPath(e,n,t,a,p,w){m(e,me),k(t),m(a,E),Te(p),_._wasm_fill_path(this.pointer,e.pointer,n,T(t),a.pointer,q(p),w)}strokePath(e,n,t,a,p,w){m(e,me),m(n,U),k(t),m(a,E),Te(p),_._wasm_stroke_path(this.pointer,e.pointer,n.pointer,T(t),a.pointer,q(p),w)}clipPath(e,n,t){m(e,me),k(t),_._wasm_clip_path(this.pointer,e.pointer,n,T(t))}clipStrokePath(e,n,t){m(e,me),m(n,U),k(t),_._wasm_clip_stroke_path(this.pointer,e.pointer,n.pointer,T(t))}fillText(e,n,t,a,p){m(e,ne),k(n),m(t,E),Te(a),_._wasm_fill_text(this.pointer,e.pointer,T(n),t.pointer,q(a),p)}strokeText(e,n,t,a,p,w){m(e,ne),m(n,U),k(t),m(a,E),Te(p),_._wasm_stroke_text(this.pointer,e.pointer,n.pointer,T(t),a.pointer,q(p),w)}clipText(e,n){m(e,ne),k(n),_._wasm_clip_text(this.pointer,e.pointer,T(n))}clipStrokeText(e,n,t){m(e,ne),m(n,U),k(t),_._wasm_clip_stroke_text(this.pointer,e.pointer,n.pointer,T(t))}ignoreText(e,n){m(e,ne),k(n),_._wasm_ignore_text(this.pointer,e.pointer,T(n))}fillShade(e,n,t){m(e,mt),k(n),_._wasm_fill_shade(this.pointer,e.pointer,T(n),t)}fillImage(e,n,t){m(e,te),k(n),_._wasm_fill_image(this.pointer,e.pointer,T(n),t)}fillImageMask(e,n,t,a,p){m(e,te),k(n),m(t,E),Te(a),_._wasm_fill_image_mask(this.pointer,e.pointer,T(n),t.pointer,q(a),p)}clipImageMask(e,n){m(e,te),k(n),_._wasm_clip_image_mask(this.pointer,e.pointer,T(n))}popClip(){_._wasm_pop_clip(this.pointer)}beginMask(e,n,t,a){$(e),m(t,E),Te(a),_._wasm_begin_mask(this.pointer,W(e),n,t.pointer,q(a))}endMask(){_._wasm_end_mask(this.pointer)}beginGroup(e,n,t,a,p,w){$(e),m(n,E);let h=j(p,Z.BLEND_MODES);_._wasm_begin_group(this.pointer,W(e),n.pointer,t,a,h,w)}endGroup(){_._wasm_end_group(this.pointer)}beginTile(e,n,t,a,p,w){return $(e),$(n),k(p),_._wasm_begin_tile(this.pointer,W(e),E_(n),t,a,T(p),w)}endTile(){_._wasm_end_tile(this.pointer)}beginLayer(e){_._wasm_begin_layer(this.pointer,b(e))}endLayer(){_._wasm_end_layer(this.pointer)}close(){_._wasm_close_device(this.pointer)}}Z._drop=_._wasm_drop_device;Z.BLEND_MODES=["Normal","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity"];class k_ extends N{constructor(e,n,t){super(_._wasm_new_document_writer_with_buffer(Q(e),b(n),Qe(t)))}beginPage(e){return $(e),new Z(_._wasm_keep_device(_._wasm_begin_page(this.pointer,W(e))))}endPage(){_._wasm_end_page(this.pointer)}close(){_._wasm_close_document_writer(this.pointer)}}k_._drop=_._wasm_drop_document_writer;class L extends N{static openDocument(e,n){let t=0,a=!1;if(typeof e=="string")if(n=e,K)e=K.readFileSync(e);else throw new Error("missing 'fs' module");else typeof n>"u"&&(n="application/pdf");if(m(n,"string"),(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=new ee(e),a=!0),e instanceof ee)t=_._wasm_open_document_with_buffer(b(n),e.pointer);else if(e instanceof jt)t=_._wasm_open_document_with_stream(b(n),e.pointer);else throw new Error("not a Buffer or Stream");a&&e.destroy();let p=_._wasm_pdf_document_from_fz_document(t);return p?new V(p):new L(t)}formatLinkURI(e){return ce(_._wasm_format_link_uri(this.pointer,e.chapter|0,e.page|0,j(e.type,L.LINK_DEST),+e.x,+e.y,+e.width,+e.height,+e.zoom))}asPDF(){return this instanceof V?this:null}isPDF(){return this instanceof V}needsPassword(){return!!_._wasm_needs_password(this.pointer)}authenticatePassword(e){return _._wasm_authenticate_password(this.pointer,b(e))}hasPermission(e){let n=L.PERMISSION[e];return!!_._wasm_has_permission(this.pointer,n)}getMetaData(e){let n=_._wasm_lookup_metadata(this.pointer,b(e));if(n)return v(n)}setMetaData(e,n){_._wasm_set_metadata(this.pointer,b(e),Qe(n))}countPages(){return _._wasm_count_pages(this.pointer)}isReflowable(){_._wasm_is_document_reflowable(this.pointer)}layout(e,n,t){_._wasm_layout_document(this.pointer,e,n,t)}loadPage(e){let n=_._wasm_load_page(this.pointer,e);if(this instanceof V){let t=_._wasm_pdf_page_from_fz_page(n);if(t)return new se(this,t)}return new le(n)}loadOutline(){let e=this.pointer;function n(a){let p=[];for(;a;){let w=_._wasm_outline_get_title(a),h=_._wasm_outline_get_uri(a),g=_._wasm_outline_get_is_open(a),c={title:w?v(w):void 0,uri:h?v(h):void 0,open:!!g},A=_._wasm_outline_get_page(e,a);A>=0&&(c.page=A);let S=_._wasm_outline_get_down(a);S&&(c.down=n(S)),p.push(c),a=_._wasm_outline_get_next(a)}return p}let t=_._wasm_load_outline(e);return t?n(t):null}resolveLink(e){return e instanceof Fe?_._wasm_resolve_link(this.pointer,_._wasm_link_get_uri(e.pointer)):_._wasm_resolve_link(this.pointer,b(e))}resolveLinkDestination(e){let n;return e instanceof Fe?n=_._wasm_resolve_link_dest(this.pointer,_._wasm_link_get_uri(e.pointer)):n=_._wasm_resolve_link_dest(this.pointer,b(e)),{type:L.LINK_DEST[_._wasm_link_dest_get_type(n)],chapter:_._wasm_link_dest_get_chapter(n),page:_._wasm_link_dest_get_page(n),x:_._wasm_link_dest_get_x(n),y:_._wasm_link_dest_get_y(n),width:_._wasm_link_dest_get_w(n),height:_._wasm_link_dest_get_h(n),zoom:_._wasm_link_dest_get_zoom(n)}}outlineIterator(){return new Be(_._wasm_new_outline_iterator(this.pointer))}}L._drop=_._wasm_drop_document;L.META_FORMAT="format";L.META_ENCRYPTION="encryption";L.META_INFO_AUTHOR="info:Author";L.META_INFO_TITLE="info:Title";L.META_INFO_SUBJECT="info:Subject";L.META_INFO_KEYWORDS="info:Keywords";L.META_INFO_CREATOR="info:Creator";L.META_INFO_PRODUCER="info:Producer";L.META_INFO_CREATIONDATE="info:CreationDate";L.META_INFO_MODIFICATIONDATE="info:ModDate";L.PERMISSION={print:112,copy:99,edit:101,annotate:110,form:102,accessibility:121,assemble:97,"print-hq":104};L.LINK_DEST=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR","XYZ"];class Be extends N{item(){let e=_._wasm_outline_iterator_item(this.pointer);if(e){let n=_._wasm_outline_item_get_title(e),t=_._wasm_outline_item_get_uri(e),a=_._wasm_outline_item_get_is_open(e);return{title:n?v(n):void 0,uri:t?v(t):void 0,open:!!a}}return null}next(){return _._wasm_outline_iterator_next(this.pointer)}prev(){return _._wasm_outline_iterator_prev(this.pointer)}up(){return _._wasm_outline_iterator_up(this.pointer)}down(){return _._wasm_outline_iterator_down(this.pointer)}delete(){return _._wasm_outline_iterator_delete(this.pointer)}insert(e){return _._wasm_outline_iterator_insert(this.pointer,Ce(e.title),Ke(e.uri),e.open)}update(e){_._wasm_outline_iterator_update(this.pointer,Ce(e.title),Ke(e.uri),e.open)}}Be._drop=_._wasm_drop_outline_iterator;Be.RESULT_DID_NOT_MOVE=-1;Be.RESULT_AT_ITEM=0;Be.RESULT_AT_EMPTY=1;class Fe extends N{getBounds(){return z(_._wasm_link_get_rect(this.pointer))}setBounds(e){$(e),_._wasm_link_set_rect(this.pointer,W(e))}getURI(){return v(_._wasm_link_get_uri(this.pointer))}setURI(e){m(e,"string"),_._wasm_link_set_uri(this.pointer,b(e))}isExternal(){return/^\w[\w+-.]*:/.test(this.getURI())}}Fe._drop=_._wasm_drop_link;class le extends N{isPDF(){return this instanceof se}getBounds(e="CropBox"){let n=j(e,le.BOXES);return z(_._wasm_bound_page(this.pointer,n))}getLabel(){return v(_._wasm_page_label(this.pointer))}run(e,n){m(e,Z),k(n),_._wasm_run_page(this.pointer,e.pointer,T(n))}runPageContents(e,n){m(e,Z),k(n),_._wasm_run_page_contents(this.pointer,e.pointer,T(n))}runPageAnnots(e,n){m(e,Z),k(n),_._wasm_run_page_annots(this.pointer,e.pointer,T(n))}runPageWidgets(e,n){m(e,Z),k(n),_._wasm_run_page_widgets(this.pointer,e.pointer,T(n))}toPixmap(e,n,t=!1,a=!0){m(n,E),k(e);let p;return a?p=_._wasm_new_pixmap_from_page(this.pointer,T(e),n.pointer,t):p=_._wasm_new_pixmap_from_page_contents(this.pointer,T(e),n.pointer,t),new ae(p)}toDisplayList(e=!0){let n;return e?n=_._wasm_new_display_list_from_page(this.pointer):n=_._wasm_new_display_list_from_page_contents(this.pointer),new Xe(n)}toStructuredText(e=""){return m(e,"string"),new de(_._wasm_new_stext_page_from_page(this.pointer,b(e)))}getLinks(){let e=[],n=_._wasm_load_links(this.pointer);for(;n;)e.push(new Fe(_._wasm_keep_link(n))),n=_._wasm_link_get_next(n);return e}createLink(e,n){return $(e),new Fe(_._wasm_create_link(this.pointer,W(e),b(n)))}deleteLink(e){m(e,Fe),_._wasm_delete_link(this.pointer,e.pointer)}search(e,n=500){return pt(_._wasm_search_page,this.pointer,e,n)}}le._drop=_._wasm_drop_page;le.BOXES=["MediaBox","CropBox","BleedBox","TrimBox","ArtBox"];class V extends L{constructor(e){if(typeof e>"u")super(_._wasm_pdf_create_document());else if(typeof e=="number")super(e);else if(e instanceof V)super(e.pointer),_._wasm_keep_document(this.pointer);else{let n=L.openDocument(e,"application/pdf");if(n instanceof V)return n;throw new Error("not a PDF document")}}loadPage(e){return super.loadPage(e)}_fromPDFObjectNew(e){return e===0?I.Null:new I(this,e)}_fromPDFObjectKeep(e){return e===0?I.Null:new I(this,_._wasm_pdf_keep_obj(e))}_toPDFObject(e){if(e instanceof I)return e;if(e==null)return this.newNull();if(typeof e=="string")return e.startsWith("(")&&e.endsWith(")")?this.newString(e.slice(1,-1)):this.newName(e);if(typeof e=="number")return e===(e|0)?this.newInteger(e):this.newReal(e);if(typeof e=="boolean")return this.newBoolean(e);if(e instanceof Array){let n=this.newArray();for(let t of e)n.push(t);return n}if(e instanceof Object){let n=this.newDictionary();for(let t in e)n.put(t,e[t]);return n}throw new TypeError("cannot convert value to PDFObject")}_PDFOBJ(e){return this._toPDFObject(e).pointer}getVersion(){return _._wasm_pdf_version(this.pointer)}getLanguage(){return Mt(_._wasm_pdf_document_language(this.pointer))}setLanguage(e){_._wasm_pdf_set_document_language(this.pointer,b(e))}countObjects(){return _._wasm_pdf_xref_len(this.pointer)}getTrailer(){return new I(this,_._wasm_pdf_trailer(this.pointer))}createObject(){let e=_._wasm_pdf_create_object(this.pointer);return this._fromPDFObjectNew(_._wasm_pdf_new_indirect(this.pointer,e))}newNull(){return I.Null}newBoolean(e){return this._fromPDFObjectNew(_._wasm_pdf_new_bool(e))}newInteger(e){return this._fromPDFObjectNew(_._wasm_pdf_new_int(e))}newReal(e){return this._fromPDFObjectNew(_._wasm_pdf_new_real(e))}newName(e){return this._fromPDFObjectNew(_._wasm_pdf_new_name(b(e)))}newString(e){return this._fromPDFObjectNew(_._wasm_pdf_new_text_string(b(e)))}newByteString(e){e instanceof Array&&(e=Uint8Array.from(e)),m(e,Uint8Array);let n=e.byteLength,t=J(n);_.HEAPU8.set(e,t);try{return this._fromPDFObjectNew(_._wasm_pdf_new_string(t,n))}finally{ge(t)}}newIndirect(e){return this._fromPDFObjectNew(_._wasm_pdf_new_indirect(this.pointer,e))}newArray(){return this._fromPDFObjectNew(_._wasm_pdf_new_array(this.pointer))}newDictionary(){return this._fromPDFObjectNew(_._wasm_pdf_new_dict(this.pointer))}deleteObject(e){e instanceof I?e=e.asIndirect():m(e,"number"),_._wasm_pdf_delete_object(this.pointer,e)}addObject(e){return this._fromPDFObjectNew(_._wasm_pdf_add_object(this.pointer,this._PDFOBJ(e)))}addStream(e,n){return this._fromPDFObjectNew(_._wasm_pdf_add_stream(this.pointer,Q(e),this._PDFOBJ(n),0))}addRawStream(e,n){return this._fromPDFObjectNew(_._wasm_pdf_add_stream(this.pointer,Q(e),this._PDFOBJ(n),1))}newGraftMap(){return new Ht(this,_._wasm_pdf_new_graft_map(this.pointer))}graftObject(e){return m(e,I),this._fromPDFObjectNew(_._wasm_pdf_graft_object(this.pointer,e.pointer))}graftPage(e,n,t){m(e,"number"),m(n,V),m(t,"number"),_._wasm_pdf_graft_page(this.pointer,e,n.pointer,t)}addSimpleFont(e,n="Latin"){m(e,D);var t=j(n,D.SIMPLE_ENCODING);return this._fromPDFObjectNew(_._wasm_pdf_add_simple_font(this.pointer,e.pointer,t))}addCJKFont(e,n,t=0,a=!0){return m(e,D),typeof n=="string"&&(n=D.CJK_ORDERING_BY_LANG[n]),this._fromPDFObjectNew(_._wasm_pdf_add_cjk_font(this.pointer,e.pointer,n,t,a))}addFont(e){return m(e,D),this._fromPDFObjectNew(_._wasm_pdf_add_cid_font(this.pointer,e.pointer))}addImage(e){return m(e,te),this._fromPDFObjectNew(_._wasm_pdf_add_image(this.pointer,e.pointer))}loadImage(e){return m(e,I),new te(_._wasm_pdf_load_image(this.pointer,e.pointer))}findPage(e){return m(e,"number"),this._fromPDFObjectKeep(_._wasm_pdf_lookup_page_obj(this.pointer,e))}addPage(e,n,t,a){return $(e),m(n,"number"),this._fromPDFObjectNew(_._wasm_pdf_add_page(this.pointer,W(e),n,this._PDFOBJ(t),Q(a)))}insertPage(e,n){m(e,"number"),_._wasm_pdf_insert_page(this.pointer,e,this._PDFOBJ(n))}deletePage(e){m(e,"number"),_._wasm_pdf_delete_page(this.pointer,e)}isEmbeddedFile(e){return m(e,I),!!_._wasm_pdf_is_embedded_file(e.pointer)}addEmbeddedFile(e,n,t,a,p,w=!1){return m(e,"string"),m(n,"string"),m(a,Date),m(p,Date),m(w,"boolean"),this._fromPDFObjectNew(_._wasm_pdf_add_embedded_file(this.pointer,b(e),Qe(n),Q(t),a.getTime()/1e3|0,p.getTime()/1e3|0,w))}getFilespecParams(e){m(e,I);let n=_._wasm_pdf_get_filespec_params(e.pointer);return{filename:v(_._wasm_pdf_filespec_params_get_filename(n)),mimetype:v(_._wasm_pdf_filespec_params_get_mimetype(n)),size:_._wasm_pdf_filespec_params_get_filename(n),creationDate:new Date(_._wasm_pdf_filespec_params_get_created(n)*1e3),modificationDate:new Date(_._wasm_pdf_filespec_params_get_modified(n)*1e3)}}getEmbeddedFileContents(e){m(e,I);let n=_._wasm_pdf_load_embedded_file_contents(e.pointer);return n?new ee(n):null}getEmbeddedFiles(){function e(n,t){var a,p;if(t.isDictionary()){var w=t.get("Names");if(w)for(a=0,p=w.length;a<p;a+=2)n[w.get(a+0).asString()]=w.get(a+1);var h=t.get("Kids");if(h)for(a=0,p=h.length;a<p;a+=1)e(n,h.get(a))}return n}return e({},this.getTrailer().get("Root","Names","EmbeddedFiles"))}loadNameTree(e){function n(p,w){var h=w.get("Kids");if(h&&h.isArray())for(var g=0;g<h.length;g+=1)n(p,h.get(g));var c=w.get("Names");if(c&&c.isArray())for(var g=0;g<c.length;g+=2)p[c.get(g).asString()]=c.get(g+1)}var t=this.getTrailer().get("Root").get("Names").get(e),a={};return t.isDictionary()&&n(a,t),a}insertEmbeddedFile(e,n){var t=this.getEmbeddedFiles();t[e]=n,this._rewriteEmbeddedFiles(t)}deleteEmbeddedFile(e){var n=this.getEmbeddedFiles();delete n[e],this._rewriteEmbeddedFiles(n)}_rewriteEmbeddedFiles(e){var n=Object.keys(e);n.sort();var t=this.getTrailer().get("Root"),a=t.get("Names");a.isDictionary()||(a=t.put("Names",this.newDictionary()));var p=a.put("EmbeddedFiles",this.newDictionary()),w=p.put("Names",this.newArray());for(var h of n)w.push(this.newString(h)),w.push(e[h])}saveToBuffer(e=""){var n;return typeof e=="object"?n=Object.entries(e).map(t=>{var a=t[0],p=t[1];return p===!0?a+"=yes":p===!1?a+"=no":a+"="+String(p).replaceAll(",",":")}).join(","):n=e,new ee(_._wasm_pdf_write_document_buffer(this.pointer,b(n)))}save(e,n=""){if(K)K.writeFileSync(e,this.saveToBuffer(n).asUint8Array());else throw new Error("missing 'fs' module")}setPageLabels(e,n="D",t="",a=1){_._wasm_pdf_set_page_labels(this.pointer,e,n.charCodeAt(0),b(t),a)}deletePageLabels(e){_._wasm_pdf_delete_page_labels(this.pointer,e)}wasRepaired(){return!!_._wasm_pdf_was_repaired(this.pointer)}hasUnsavedChanges(){return!!_._wasm_pdf_has_unsaved_changes(this.pointer)}countVersions(){return _._wasm_pdf_count_versions(this.pointer)}countUnsavedVersions(){return _._wasm_pdf_count_unsaved_versions(this.pointer)}validateChangeHistory(){return _._wasm_pdf_validate_change_history(this.pointer)}canBeSavedIncrementally(){return!!_._wasm_pdf_can_be_saved_incrementally(this.pointer)}enableJournal(){_._wasm_pdf_enable_journal(this.pointer)}getJournal(){let e=_._wasm_pdf_undoredo_state_position(this.pointer),n=_._wasm_pdf_undoredo_state_count(this.pointer),t=[];for(let a=0;a<n;++a)t.push(v(_._wasm_pdf_undoredo_step(this.pointer,a)));return{position:e,steps:t}}beginOperation(e){_._wasm_pdf_begin_operation(this.pointer,b(e))}beginImplicitOperation(){_._wasm_pdf_begin_implicit_operation(this.pointer)}endOperation(){_._wasm_pdf_end_operation(this.pointer)}abandonOperation(){_._wasm_pdf_abandon_operation(this.pointer)}canUndo(){return!!_._wasm_pdf_can_undo(this.pointer)}canRedo(){return!!_._wasm_pdf_can_redo(this.pointer)}undo(){_._wasm_pdf_undo(this.pointer)}redo(){_._wasm_pdf_redo(this.pointer)}isJSSupported(){return!!_._wasm_pdf_js_supported(this.pointer)}enableJS(){_._wasm_pdf_enable_js(this.pointer)}disableJS(){_._wasm_pdf_disable_js(this.pointer)}setJSEventListener(e){throw"TODO"}rearrangePages(e){let n=e.length,t=J(n<<2);for(let a=0;a<n;++a)_.HEAPU32[(t>>2)+a]=e[a]||0;try{_._wasm_pdf_rearrange_pages(this.pointer,n,t)}finally{ge(t)}}subsetFonts(){_._wasm_pdf_subset_fonts(this.pointer)}bake(e=!0,n=!0){_._wasm_pdf_bake_document(this.pointer,e,n)}countLayers(){return _._wasm_pdf_count_layers(this.pointer)}isLayerVisible(e){return!!_._wasm_pdf_layer_is_enabled(this.pointer,e)}setLayerVisible(e,n){_._wasm_pdf_enable_layer(this.pointer,e,Number(n))}getLayerName(e){return v(_._wasm_pdf_layer_name(this.pointer,e))}resetForm(e,n){_._wasm_pdf_reset_form(this.pointer,this._PDFOBJ(e),Number(n))}}V.PAGE_LABEL_NONE="\0";V.PAGE_LABEL_DECIMAL="D";V.PAGE_LABEL_ROMAN_UC="R";V.PAGE_LABEL_ROMAN_LC="r";V.PAGE_LABEL_ALPHA_UC="A";V.PAGE_LABEL_ALPHA_LC="a";class se extends le{constructor(e,n){super(n),this._doc=e,this._annots=null,this._widgets=null}getObject(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_page_get_obj(this.pointer))}getTransform(){return M(_._wasm_pdf_page_transform(this.pointer))}setPageBox(e,n){let t=j(e,le.BOXES);$(n),_._wasm_pdf_set_page_box(this.pointer,t,W(n))}toPixmap(e,n,t=!1,a=!0,p="View",w="CropBox"){k(e),m(n,E);let h=j(w,le.BOXES),g;return a?g=_._wasm_pdf_new_pixmap_from_page_with_usage(this.pointer,T(e),n.pointer,t,b(p),h):g=_._wasm_pdf_new_pixmap_from_page_contents_with_usage(this.pointer,T(e),n.pointer,t,b(p),h),new ae(g)}getWidgets(){if(!this._widgets){this._widgets=[];let e=_._wasm_pdf_first_widget(this.pointer);for(;e;)this._widgets.push(new O(this._doc,_._wasm_pdf_keep_annot(e))),e=_._wasm_pdf_next_widget(e)}return this._widgets}getAnnotations(){if(!this._annots){this._annots=[];let e=_._wasm_pdf_first_annot(this.pointer);for(;e;)this._annots.push(new x(this._doc,_._wasm_pdf_keep_annot(e))),e=_._wasm_pdf_next_annot(e)}return this._annots}createAnnotation(e){let n=j(e,x.ANNOT_TYPES),t=new x(this._doc,_._wasm_pdf_create_annot(this.pointer,n));return this._annots&&this._annots.push(t),t}deleteAnnotation(e){if(m(e,x),_._wasm_pdf_delete_annot(this.pointer,e.pointer),this._annots){let n=this._annots.indexOf(e);n>=0&&this._annots.splice(n,1)}}applyRedactions(e=!0,n=2,t=1,a=0){_._wasm_pdf_redact_page(this.pointer,Number(e),n,t,a)}update(){return!!_._wasm_pdf_update_page(this.pointer)}}se.REDACT_IMAGE_NONE=0;se.REDACT_IMAGE_REMOVE=1;se.REDACT_IMAGE_PIXELS=2;se.REDACT_IMAGE_UNLESS_INVISIBLE=3;se.REDACT_LINE_ART_NONE=0;se.REDACT_LINE_ART_REMOVE_IF_COVERED=1;se.REDACT_LINE_ART_REMOVE_IF_TOUCHED=2;se.REDACT_TEXT_REMOVE=0;se.REDACT_TEXT_NONE=1;class I extends N{constructor(e,n){super(_._wasm_pdf_keep_obj(n)),this._doc=e}isNull(){return this===I.Null}isIndirect(){return!!_._wasm_pdf_is_indirect(this.pointer)}isBoolean(){return!!_._wasm_pdf_is_bool(this.pointer)}isInteger(){return!!_._wasm_pdf_is_int(this.pointer)}isReal(){return!!_._wasm_pdf_is_real(this.pointer)}isNumber(){return!!_._wasm_pdf_is_number(this.pointer)}isName(){return!!_._wasm_pdf_is_name(this.pointer)}isString(){return!!_._wasm_pdf_is_string(this.pointer)}isArray(){return!!_._wasm_pdf_is_array(this.pointer)}isDictionary(){return!!_._wasm_pdf_is_dict(this.pointer)}isStream(){return!!_._wasm_pdf_is_stream(this.pointer)}asIndirect(){return _._wasm_pdf_to_num(this.pointer)}asBoolean(){return!!_._wasm_pdf_to_bool(this.pointer)}asNumber(){return _._wasm_pdf_to_real(this.pointer)}asName(){return v(_._wasm_pdf_to_name(this.pointer))}asString(){return v(_._wasm_pdf_to_text_string(this.pointer))}asByteString(){let e=_._wasm_pdf_to_string(this.pointer,St),n=_.HEAPU32[St>>2];return _.HEAPU8.slice(e,e+n)}readStream(){return new ee(_._wasm_pdf_load_stream(this.pointer))}readRawStream(){return new ee(_._wasm_pdf_load_raw_stream(this.pointer))}writeObject(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeObject on an indirect reference");_._wasm_pdf_update_object(this._doc.pointer,this.asIndirect(),this._doc._PDFOBJ(e))}writeStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeStream on an indirect reference");_._wasm_pdf_update_stream(this._doc.pointer,this.pointer,Q(e),0)}writeRawStream(e){if(!this.isIndirect())throw new TypeError("can only call PDFObject.writeRawStream on an indirect reference");_._wasm_pdf_update_stream(this._doc.pointer,this.pointer,Q(e),1)}resolve(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_resolve_indirect(this.pointer))}get length(){return _._wasm_pdf_array_len(this.pointer)}set length(e){throw new TypeError("object length is read-only")}_get(e){let n=this.pointer;for(let t of e)if(typeof t=="number"?n=_._wasm_pdf_array_get(n,t):t instanceof I?n=_._wasm_pdf_dict_get(n,t.pointer):n=_._wasm_pdf_dict_gets(n,b(t)),n===0)break;return n}get(...e){return this._doc._fromPDFObjectKeep(this._get(e))}getInheritable(e){return e instanceof I?this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_inheritable(this.pointer,e.pointer)):this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_gets_inheritable(this.pointer,b(e)))}put(e,n){return n=this._doc._toPDFObject(n),typeof e=="number"?_._wasm_pdf_array_put(this.pointer,e,n.pointer):e instanceof I?_._wasm_pdf_dict_put(this.pointer,e.pointer,n.pointer):_._wasm_pdf_dict_puts(this.pointer,b(e),n.pointer),n}push(e){return e=this._doc._toPDFObject(e),_._wasm_pdf_array_push(this.pointer,e.pointer),e}delete(e){typeof e=="number"?_._wasm_pdf_array_delete(this.pointer,e):e instanceof I?_._wasm_pdf_dict_del(this.pointer,e.pointer):_._wasm_pdf_dict_dels(this.pointer,b(e))}valueOf(){return this.isNull()?null:this.isBoolean()?this.asBoolean():this.isNumber()?this.asNumber():this.isName()?this.asName():this.isString()?this.asString():this.isIndirect()?`${this.asIndirect()} 0 R`:this}toString(e=!0,n=!0){return ce(_._wasm_pdf_sprint_obj(this.pointer,e,n))}forEach(e){if(this.isArray()){let n=this.length;for(let t=0;t<n;++t)e(this.get(t),t,this)}else if(this.isDictionary()){let n=_._wasm_pdf_dict_len(this.pointer);for(let t=0;t<n;++t){let a=this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_key(this.pointer,t)),p=this._doc._fromPDFObjectKeep(_._wasm_pdf_dict_get_val(this.pointer,t));e(p,a.asName(),this)}}}asJS(e){if(this.isIndirect()){let n=this.asIndirect();return e?n in e?e[n]:(e[n]=I.Null,e[n]=this.resolve().asJS(e)):`${n} 0 R`}if(this.isArray()){let n=[];return this.forEach(t=>{n.push(t.asJS(e))}),n}if(this.isDictionary()){let n={};return this.forEach((t,a)=>{n[a]=t.asJS(e)}),n}return this.valueOf()}}I._drop=_._wasm_pdf_drop_obj;I.Null=new I(null,0);class Ht extends N{constructor(e,n){super(n),this._doc=e}graftObject(e){return m(e,I),this._doc._fromPDFObjectNew(_._wasm_pdf_graft_mapped_object(this.pointer,e.pointer))}graftPage(e,n,t){m(e,"number"),m(n,V),m(t,"number"),_._wasm_pdf_graft_mapped_page(this.pointer,e,n.pointer,t)}}Ht._drop=_._wasm_pdf_drop_graft_map;class x extends N{constructor(e,n){super(n),this._doc=e}getObject(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_annot_obj(this.pointer))}getBounds(){return z(_._wasm_pdf_bound_annot(this.pointer))}run(e,n){m(e,Z),k(n),_._wasm_pdf_run_annot(this.pointer,e.pointer,T(n))}toPixmap(e,n,t=!1){return k(e),m(n,E),new ae(_._wasm_pdf_new_pixmap_from_annot(this.pointer,T(e),n.pointer,t))}toDisplayList(){return new Xe(_._wasm_pdf_new_display_list_from_annot(this.pointer))}update(){return!!_._wasm_pdf_update_annot(this.pointer)}getType(){let e=_._wasm_pdf_annot_type(this.pointer);return x.ANNOT_TYPES[e]||"Text"}getLanguage(){return Mt(_._wasm_pdf_annot_language(this.pointer))}setLanguage(e){_._wasm_pdf_set_annot_language(this.pointer,b(e))}getFlags(){return _._wasm_pdf_annot_flags(this.pointer)}setFlags(e){return _._wasm_pdf_set_annot_flags(this.pointer,e)}getContents(){return v(_._wasm_pdf_annot_contents(this.pointer))}setContents(e){_._wasm_pdf_set_annot_contents(this.pointer,b(e))}getAuthor(){return v(_._wasm_pdf_annot_author(this.pointer))}setAuthor(e){_._wasm_pdf_set_annot_author(this.pointer,b(e))}getCreationDate(){return new Date(_._wasm_pdf_annot_creation_date(this.pointer)*1e3)}setCreationDate(e){m(e,Date),_._wasm_pdf_set_annot_creation_date(this.pointer,e.getTime()/1e3)}getModificationDate(){return new Date(_._wasm_pdf_annot_modification_date(this.pointer)*1e3)}setModificationDate(e){m(e,Date),_._wasm_pdf_set_annot_modification_date(this.pointer,e.getTime()/1e3)}hasRect(){return!!_._wasm_pdf_annot_has_rect(this.pointer)}hasInkList(){return!!_._wasm_pdf_annot_has_ink_list(this.pointer)}hasQuadPoints(){return!!_._wasm_pdf_annot_has_quad_points(this.pointer)}hasVertices(){return!!_._wasm_pdf_annot_has_vertices(this.pointer)}hasLine(){return!!_._wasm_pdf_annot_has_line(this.pointer)}hasInteriorColor(){return!!_._wasm_pdf_annot_has_interior_color(this.pointer)}hasLineEndingStyles(){return!!_._wasm_pdf_annot_has_line_ending_styles(this.pointer)}hasBorder(){return!!_._wasm_pdf_annot_has_border(this.pointer)}hasBorderEffect(){return!!_._wasm_pdf_annot_has_border_effect(this.pointer)}hasIcon(){return!!_._wasm_pdf_annot_has_icon_name(this.pointer)}hasOpen(){return!!_._wasm_pdf_annot_has_open(this.pointer)}hasAuthor(){return!!_._wasm_pdf_annot_has_author(this.pointer)}hasFilespec(){return!!_._wasm_pdf_annot_has_filespec(this.pointer)}hasCallout(){return!!_._wasm_pdf_annot_has_callout(this.pointer)}hasRichContents(){return!!_._wasm_pdf_annot_has_rich_contents(this.pointer)}getRect(){return z(_._wasm_pdf_annot_rect(this.pointer))}setRect(e){$(e),_._wasm_pdf_set_annot_rect(this.pointer,W(e))}getPopup(){return z(_._wasm_pdf_annot_popup(this.pointer))}setPopup(e){$(e),_._wasm_pdf_set_annot_popup(this.pointer,W(e))}getIsOpen(){return!!_._wasm_pdf_annot_is_open(this.pointer)}setIsOpen(e){m(e,"boolean"),_._wasm_pdf_set_annot_is_open(this.pointer,e)}getHiddenForEditing(){return!!_._wasm_pdf_annot_hidden_for_editing(this.pointer)}setHiddenForEditing(e){m(e,"boolean"),_._wasm_pdf_set_annot_hidden_for_editing(this.pointer,e)}getIcon(){return v(_._wasm_pdf_annot_icon_name(this.pointer))}setIcon(e){m(e,"string"),_._wasm_pdf_set_annot_icon_name(this.pointer,b(e))}getOpacity(){return _._wasm_pdf_annot_opacity(this.pointer)}setOpacity(e){m(e,"number"),_._wasm_pdf_set_annot_opacity(this.pointer,e)}getQuadding(){return _._wasm_pdf_annot_quadding(this.pointer)}setQuadding(e){m(e,"number"),_._wasm_pdf_set_annot_quadding(this.pointer,e)}getLine(){let e=X(_._wasm_pdf_annot_line_1(this.pointer)),n=X(_._wasm_pdf_annot_line_2(this.pointer));return[e,n]}setLine(e,n){$e(e),$e(n),_._wasm_pdf_set_annot_line(this.pointer,pe(e),Oe(n))}getLineEndingStyles(){let e=_._wasm_pdf_annot_line_ending_styles_start(this.pointer),n=_._wasm_pdf_annot_line_ending_styles_end(this.pointer);return{start:x.LINE_ENDING[e]||"None",end:x.LINE_ENDING[n]||"None"}}setLineEndingStyles(e,n){let t=j(e,x.LINE_ENDING),a=j(n,x.LINE_ENDING);_._wasm_pdf_set_annot_line_ending_styles(this.pointer,t,a)}getLineCaption(){return _._wasm_pdf_annot_line_caption(this.pointer)}setLineCaption(e){return _._wasm_pdf_set_annot_line_caption(this.pointer,e)}getLineCaptionOffset(){return X(_._wasm_pdf_annot_line_caption_offset(this.pointer))}setLineCaptionOffset(e){return _._wasm_pdf_set_annot_line_caption_offset(this.pointer,pe(e))}getLineLeader(){return _._wasm_pdf_annot_line_leader(this.pointer)}getLineLeaderExtension(){return _._wasm_pdf_annot_line_leader_extension(this.pointer)}getLineLeaderOffset(){return _._wasm_pdf_annot_line_leader_offset(this.pointer)}setLineLeader(e){return _._wasm_pdf_set_annot_line_leader(this.pointer,e)}setLineLeaderExtension(e){return _._wasm_pdf_set_annot_line_leader_extension(this.pointer,e)}setLineLeaderOffset(e){return _._wasm_pdf_set_annot_line_leader_offset(this.pointer,e)}getCalloutStyle(){let e=_._wasm_pdf_annot_callout_style(this.pointer);return x.LINE_ENDING[e]||"None"}setCalloutStyle(e){let n=j(e,x.LINE_ENDING);_._wasm_pdf_set_annot_callout_style(this.pointer,n)}getCalloutLine(){let e=_._wasm_pdf_annot_callout_line(this.pointer,G<<2);return e==3?[X(G+0<<2),X(G+1<<2),X(G+2<<2)]:e==2?[X(G+0<<2),X(G+1<<2)]:null}setCalloutLine(e){let n=e[0]||[0,0],t=e[1]||[0,0],a=e[2]||[0,0];_._wasm_pdf_set_annot_callout_line(this.pointer,e.length,pe(n),Oe(t),y_(a))}getCalloutPoint(){let e=this.getCalloutLine();if(e)return e[0]}setCalloutPoint(e){_._wasm_pdf_set_annot_callout_point(this.pointer,pe(e))}getColor(){return at(_._wasm_pdf_annot_color(this.pointer,q()))}getInteriorColor(){return at(_._wasm_pdf_annot_interior_color(this.pointer,q()))}setColor(e){rt(e),_._wasm_pdf_set_annot_color(this.pointer,e.length,q(e))}setInteriorColor(e){rt(e),_._wasm_pdf_set_annot_interior_color(this.pointer,e.length,q(e))}getBorderWidth(){return _._wasm_pdf_annot_border_width(this.pointer)}setBorderWidth(e){return m(e,"number"),_._wasm_pdf_set_annot_border_width(this.pointer,e)}getBorderStyle(){return x.BORDER_STYLE[_._wasm_pdf_annot_border_style(this.pointer)]||"Solid"}setBorderStyle(e){let n=j(e,x.BORDER_STYLE);return _._wasm_pdf_set_annot_border_style(this.pointer,n)}getBorderEffect(){return x.BORDER_EFFECT[_._wasm_pdf_annot_border_effect(this.pointer)]||"None"}setBorderEffect(e){let n=j(e,x.BORDER_EFFECT);return _._wasm_pdf_set_annot_border_effect(this.pointer,n)}getBorderEffectIntensity(){return _._wasm_pdf_annot_border_effect_intensity(this.pointer)}setBorderEffectIntensity(e){return m(e,"number"),_._wasm_pdf_set_annot_border_effect_intensity(this.pointer,e)}getBorderDashCount(){return _._wasm_pdf_annot_border_dash_count(this.pointer)}getBorderDashItem(e){return _._wasm_pdf_annot_border_dash_item(this.pointer,e)}clearBorderDash(){_._wasm_pdf_clear_annot_border_dash(this.pointer)}addBorderDashItem(e){return m(e,"number"),_._wasm_pdf_add_annot_border_dash_item(this.pointer,e)}getBorderDashPattern(){let e=this.getBorderDashCount(),n=new Array(e);for(let t=0;t<e;++t)n[t]=this.getBorderDashItem(t);return n}setBorderDashPattern(e){this.clearBorderDash();for(let n of e)this.addBorderDashItem(n)}getIntent(){return x.INTENT[_._wasm_pdf_annot_intent(this.pointer)]||null}setIntent(e){let n=j(e,x.INTENT);return _._wasm_pdf_set_annot_intent(this.pointer,n)}setDefaultAppearance(e,n,t){m(e,"string"),m(n,"number"),rt(t),_._wasm_pdf_set_annot_default_appearance(this.pointer,b(e),n,t.length,q(t))}getDefaultAppearance(){let e=v(_._wasm_pdf_annot_default_appearance_font(this.pointer)),n=_._wasm_pdf_annot_default_appearance_size(this.pointer),t=at(_._wasm_pdf_annot_default_appearance_color(this.pointer,q()));return{font:e,size:n,color:t}}getFileSpec(){return this._doc._fromPDFObjectKeep(_._wasm_pdf_annot_filespec(this.pointer))}setFileSpec(e){return _._wasm_pdf_set_annot_filespec(this.pointer,this._doc._PDFOBJ(e))}getQuadPoints(){let e=_._wasm_pdf_annot_quad_point_count(this.pointer),n=[];for(let t=0;t<e;++t)n.push(Le(_._wasm_pdf_annot_quad_point(this.pointer,t)));return n}clearQuadPoints(){_._wasm_pdf_clear_annot_quad_points(this.pointer)}addQuadPoint(e){Rt(e),_._wasm_pdf_add_annot_quad_point(this.pointer,Bt(e))}setQuadPoints(e){this.clearQuadPoints();for(let n of e)this.addQuadPoint(n)}getVertices(){let e=_._wasm_pdf_annot_vertex_count(this.pointer),n=new Array(e);for(let t=0;t<e;++t)n[t]=X(_._wasm_pdf_annot_vertex(this.pointer,t));return n}clearVertices(){_._wasm_pdf_clear_annot_vertices(this.pointer)}addVertex(e){$e(e),_._wasm_pdf_add_annot_vertex(this.pointer,pe(e))}setVertices(e){this.clearVertices();for(let n of e)this.addVertex(n)}getInkList(){let e=_._wasm_pdf_annot_ink_list_count(this.pointer),n=[];for(let t=0;t<e;++t){let a=_._wasm_pdf_annot_ink_list_stroke_count(this.pointer,t),p=new Array(a);for(let w=0;w<a;++w)p[w]=X(_._wasm_pdf_annot_ink_list_stroke_vertex(this.pointer,t,w));n.push(p)}return n}clearInkList(){_._wasm_pdf_clear_annot_ink_list(this.pointer)}addInkListStroke(){_._wasm_pdf_add_annot_ink_list_stroke(this.pointer)}addInkListStrokeVertex(e){$e(e),_._wasm_pdf_add_annot_ink_list_stroke_vertex(this.pointer,pe(e))}setInkList(e){this.clearInkList();for(let n of e){this.addInkListStroke();for(let t of n)this.addInkListStrokeVertex(t)}}getRichContents(){return v(_._wasm_pdf_annot_rich_contents(this.pointer))}setRichContents(e,n){m(e,"string"),m(n,"string"),_._wasm_pdf_set_annot_rich_contents(this.pointer,b(e),Qe(n))}getRichDefaults(){return v(_._wasm_pdf_annot_rich_defaults(this.pointer))}setRichDefaults(e){m(e,"string"),_._wasm_pdf_set_annot_rich_defaults(this.pointer,b(e))}setStampImage(e){_._wasm_pdf_set_annot_stamp_image(this.pointer,e.pointer)}setAppearanceFromDisplayList(e,n,t,a){k(t),m(a,Xe),_._wasm_pdf_set_annot_appearance_from_display_list(this.pointer,Ce(e),Ke(n),T(t),a.pointer)}setAppearance(e,n,t,a,p,w){k(t),$(a),_._wasm_pdf_set_annot_appearance(this.pointer,Ce(e),Ke(n),T(t),W(a),this._doc._PDFOBJ(p),Q(w))}applyRedaction(e=1,n=2,t=1,a=0){_._wasm_pdf_apply_redaction(this.pointer,e,n,t,a)}}x._drop=_._wasm_pdf_drop_annot;x.ANNOT_TYPES=["Text","Link","FreeText","Line","Square","Circle","Polygon","PolyLine","Highlight","Underline","Squiggly","StrikeOut","Redact","Stamp","Caret","Ink","Popup","FileAttachment","Sound","Movie","RichMedia","Widget","Screen","PrinterMark","TrapNet","Watermark","3D","Projection"];x.LINE_ENDING=["None","Square","Circle","Diamond","OpenArrow","ClosedArrow","Butt","ROpenArrow","RClosedArrow","Slash"];x.BORDER_STYLE=["Solid","Dashed","Beveled","Inset","Underline"];x.BORDER_EFFECT=["None","Cloudy"];x.INTENT=[null,"FreeTextCallout","FreeTextTypeWriter","LineArrow","LineDimension","PloyLine","PolygonCloud","PolygonDimension","StampImage","StampSnapshot"];x.IS_INVISIBLE=1;x.IS_HIDDEN=2;x.IS_PRINT=4;x.IS_NO_ZOOM=8;x.IS_NO_ROTATE=16;x.IS_NO_VIEW=32;x.IS_READ_ONLY=64;x.IS_LOCKED=128;x.IS_TOGGLE_NO_VIEW=256;x.IS_LOCKED_CONTENTS=512;class O extends x{getFieldType(){return O.WIDGET_TYPES[_._wasm_pdf_annot_field_type(this.pointer)]||"button"}isButton(){let e=this.getFieldType();return e==="button"||e==="checkbox"||e==="radiobutton"}isPushButton(){return this.getFieldType()==="button"}isCheckbox(){return this.getFieldType()==="checkbox"}isRadioButton(){return this.getFieldType()==="radiobutton"}isText(){return this.getFieldType()==="text"}isChoice(){let e=this.getFieldType();return e==="combobox"||e==="listbox"}isListBox(){return this.getFieldType()==="listbox"}isComboBox(){return this.getFieldType()==="combobox"}getFieldFlags(){return _._wasm_pdf_annot_field_flags(this.pointer)}isMultiline(){return(this.getFieldFlags()&O.TX_FIELD_IS_MULTILINE)!==0}isPassword(){return(this.getFieldFlags()&O.TX_FIELD_IS_PASSWORD)!==0}isComb(){return(this.getFieldFlags()&O.TX_FIELD_IS_COMB)!==0}isReadOnly(){return(this.getFieldFlags()&O.FIELD_IS_READ_ONLY)!==0}getLabel(){return v(_._wasm_pdf_annot_field_label(this.pointer))}getName(){return ce(_._wasm_pdf_load_field_name(this.pointer))}getValue(){return v(_._wasm_pdf_annot_field_value(this.pointer))}setTextValue(e){return _._wasm_pdf_set_annot_text_field_value(this.pointer,b(e))}getMaxLen(){return _._wasm_pdf_annot_text_widget_max_len(this.pointer)}setChoiceValue(e){return _._wasm_pdf_set_annot_choice_field_value(this.pointer,b(e))}getOptions(e=!1){let n=[],t=_._wasm_pdf_annot_choice_field_option_count(this.pointer);for(let a=0;a<t;++a)n.push(v(_._wasm_pdf_annot_choice_field_option(this.pointer,e,a)));return n}toggle(){return _._wasm_pdf_toggle_widget(this.pointer)}}O.WIDGET_TYPES=["widget","button","checkbox","combobox","listbox","radiobutton","signature","text"];O.FIELD_IS_READ_ONLY=1;O.FIELD_IS_REQUIRED=2;O.FIELD_IS_NO_EXPORT=4;O.TX_FIELD_IS_MULTILINE=4096;O.TX_FIELD_IS_PASSWORD=8192;O.TX_FIELD_IS_COMB=1<<24;O.BTN_FIELD_IS_NO_TOGGLE_TO_OFF=16384;O.BTN_FIELD_IS_RADIO=32768;O.BTN_FIELD_IS_PUSHBUTTON=65536;O.CH_FIELD_IS_COMBO=1<<17;O.CH_FIELD_IS_EDIT=1<<18;O.CH_FIELD_IS_SORT=1<<19;O.CH_FIELD_IS_MULTI_SELECT=1<<21;var A_=0,Re=new Map;globalThis.$libmupdf_stm_close=function(r){let e=Re.get(r);if(e){e.close(),Re.delete(r);return}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_seek=function(r,e,n,t){let a=Re.get(r);if(a){if(t===0)return n;if(t===1)return e+n;if(t===2){let p=a.fileSize();return p<0?-1:p+n}throw new Error("invalid whence argument")}throw new Error("invalid file handle")};globalThis.$libmupdf_stm_read=function(r,e,n,t){let a=Re.get(r);if(a)return a.read(_.HEAPU8,n,t,e);throw new Error("invalid file handle")};class jt extends N{constructor(e){let n=A_++;Re.set(n,e),super(_._wasm_new_stream(n))}}jt._drop=_._wasm_drop_stream;globalThis.$libmupdf_load_font_file=function(r,e,n,t){return 0};var P_=0,F=new Map,v_=0,ve=new Map,F_=0,Ne=new Map;globalThis.$libmupdf_path_walk={moveto(r,e,n){ve.get(r)?.moveTo?.(e,n)},lineto(r,e,n){ve.get(r)?.lineTo?.(e,n)},curveto(r,e,n,t,a,p,w){ve.get(r)?.curveTo?.(e,n,t,a,p,w)},closepath(r){ve.get(r)?.closePath?.()}};var Ae=null;globalThis.$libmupdf_text_walk={begin_span(r,e,n,t,a,p,w){e!==Ae?.pointer&&(Ae=new D(e)),Ne.get(r)?.beginSpan?.(Ae,M(n),t,a,p,v(w))},end_span(r){Ne.get(r)?.endSpan?.()},show_glyph(r,e,n,t,a,p,w){e!==Ae?.pointer&&(Ae=new D(e)),Ne.get(r)?.showGlyph?.(Ae,M(n),t,a,p,w)}};globalThis.$libmupdf_device={drop_device(r){F.get(r)?.drop?.(),F.delete(r)},close_device(r){F.get(r)?.close?.()},fill_path(r,e,n,t,a,p,w,h){F.get(r)?.fillPath?.(new me(_._wasm_keep_path(e)),!!n,M(t),new E(_._wasm_keep_colorspace(a)),ke(p,w),h)},clip_path(r,e,n,t){F.get(r)?.clipPath?.(new me(_._wasm_keep_path(e)),!!n,M(t))},stroke_path(r,e,n,t,a,p,w,h){F.get(r)?.strokePath?.(new me(_._wasm_keep_path(e)),new U(_._wasm_keep_stroke_state(n)),M(t),new E(_._wasm_keep_colorspace(a)),ke(p,w),h)},clip_stroke_path(r,e,n,t){F.get(r)?.clipStrokePath?.(new me(_._wasm_keep_path(e)),new U(_._wasm_keep_stroke_state(n)),M(t))},fill_text(r,e,n,t,a,p,w){F.get(r)?.fillText?.(new ne(_._wasm_keep_text(e)),M(n),new E(_._wasm_keep_colorspace(t)),ke(a,p),w)},stroke_text(r,e,n,t,a,p,w,h){F.get(r)?.strokeText?.(new ne(_._wasm_keep_text(e)),new U(_._wasm_keep_stroke_state(n)),M(t),new E(_._wasm_keep_colorspace(a)),ke(p,w),h)},clip_text(r,e,n){F.get(r)?.clipText?.(new ne(_._wasm_keep_text(e)),M(n))},clip_stroke_text(r,e,n,t){F.get(r)?.clipStrokeText?.(new ne(_._wasm_keep_text(e)),new U(_._wasm_keep_stroke_state(n)),M(t))},ignore_text(r,e,n){F.get(r)?.ignoreText?.(new ne(_._wasm_keep_text(e)),M(n))},fill_shade(r,e,n,t){F.get(r)?.fillShade?.(new mt(e),M(n),t)},fill_image(r,e,n,t){F.get(r)?.fillImage?.(new te(e),M(n),t)},fill_image_mask(r,e,n,t,a,p,w){F.get(r)?.fillImageMask?.(new te(e),M(n),new E(_._wasm_keep_colorspace(t)),ke(a,p),w)},clip_image_mask(r,e,n){F.get(r)?.clipImageMask?.(new te(e),M(n))},pop_clip(r){F.get(r)?.popClip?.()},begin_mask(r,e,n,t,a,p){F.get(r)?.beginMask?.(z(e),!!n,new E(_._wasm_keep_colorspace(t)),ke(a,p))},begin_group(r,e,n,t,a,p,w){F.get(r)?.beginGroup?.(z(e),new E(_._wasm_keep_colorspace(n)),!!t,!!a,Z.BLEND_MODES[p],w)},begin_tile(r,e,n,t,a,p,w){return F.get(r)?.beginTile?.(z(e),z(n),t,a,M(p),w)||0},begin_layer(r,e){F.get(r)?.beginLayer?.(v(e))},end_mask(r){F.get(r)?.endMask?.()},end_group(r){F.get(r)?.endGroup?.()},end_tile(r){F.get(r)?.endTile?.()},end_layer(r){F.get(r)?.endLayer?.()}};const S_="MUPDF_LOADED";class I_{pdfdocument;constructor(){this.initializeMupdf()}initializeMupdf(){try{postMessage(S_)}catch(e){console.error("Failed to initialize MuPDF:",e)}}loadDocument(e){return this.pdfdocument=L.openDocument(e,"application/pdf"),this.pdfdocument}getPageCount(){if(!this.pdfdocument)throw new Error("Document not loaded");return this.pdfdocument.countPages()}removeReferences(e){this.loadDocument(e);const n=this.pdfdocument.asPDF(),t=/\([^)]*[\d]+[^)]*\)/g;for(let a=0;a<n.countPages();a++){const p=n.loadPage(a),w=p.toStructuredText().asText(),h=w.matchAll(t);if(console.debug(w),h){for(const g of h){console.debug("found",g);const c=p.search(g[0]);for(const A of c){const S=p.createAnnotation("Redact");S.setQuadPoints(A),S.setColor([1,1,1])}}p.applyRedactions(!1)}}}async getDocumentBytes(){if(!this.pdfdocument)throw new Error("Document not loaded");return this.pdfdocument.asPDF()?.saveToBuffer().asUint8Array()}}ot(new I_);
